<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>ãƒãƒ„ã‚¨ã®æºå¸¯</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@200;300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css?v=7">
    <link rel="stylesheet" href="css/phone.css?v=7">
    <link rel="stylesheet" href="css/apps/player.css?v=14">
    <link rel="stylesheet" href="css/apps/messages.css?v=13">
    <link rel="stylesheet" href="css/apps/diary.css?v=7">
    <link rel="stylesheet" href="css/apps/memo.css?v=8">
    <link rel="stylesheet" href="css/apps/browser.css?v=9">
    <link rel="stylesheet" href="css/apps/calendar.css?v=7">
    <link rel="stylesheet" href="css/auth.css?v=1">
</head>
<body>
    <!-- å…è´£å£°æ˜é¡µé¢ -->
    <div class="disclaimer-overlay" id="disclaimer-overlay">
        <div class="disclaimer-container">
            <div class="disclaimer-header">
                <div class="disclaimer-icon">ğŸ“±</div>
                <h1 class="disclaimer-title">ãƒãƒ„ã‚¨ã®æºå¸¯</h1>
                <p class="disclaimer-subtitle">ã”åˆ©ç”¨å‰ã«ãŠèª­ã¿ãã ã•ã„</p>
            </div>

            <div class="disclaimer-content">
                <div class="disclaimer-item">
                    <span class="disclaimer-bullet">ğŸŒ¸</span>
                    <div class="disclaimer-text">
                        <span class="disclaimer-jp">æœ¬ã‚µã‚¤ãƒˆã¯å€‹äººã®è¶£å‘³ã«ã‚ˆã‚‹äºŒæ¬¡å‰µä½œã§ã™</span>
                        <span class="disclaimer-cn">ï¼ˆæœ¬ç«™æ˜¯åŸºäºä¸ªäººçˆ±å¥½çš„äºŒæ¬¡åˆ›ä½œï¼‰</span>
                    </div>
                </div>

                <div class="disclaimer-item">
                    <span class="disclaimer-bullet">ğŸ“</span>
                    <div class="disclaimer-text">
                        <span class="disclaimer-jp">ç¿»è¨³ã¯å­¦ç¿’ãƒ»äº¤æµç›®çš„ã®ã¿ã§ã™</span>
                        <span class="disclaimer-cn">ï¼ˆç¿»è¯‘ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼‰</span>
                    </div>
                </div>

                <div class="disclaimer-item">
                    <span class="disclaimer-bullet">ğŸš«</span>
                    <div class="disclaimer-text">
                        <span class="disclaimer-jp">ã„ã‹ãªã‚‹å½¢å¼ã§ã®è»¢è¼‰ãƒ»é…å¸ƒã‚’ç¦æ­¢ã—ã¾ã™</span>
                        <span class="disclaimer-cn">ï¼ˆä¸¥ç¦ä»»ä½•å½¢å¼çš„è½¬è½½å’Œä¼ æ’­ï¼‰</span>
                    </div>
                </div>

                <div class="disclaimer-item">
                    <span class="disclaimer-bullet">âœ¨</span>
                    <div class="disclaimer-text">
                        <span class="disclaimer-jp">äºŒæ¬¡å‰µä½œã®å†…å®¹ãŒå«ã¾ã‚Œã¦ã„ã¾ã™</span>
                        <span class="disclaimer-cn">ï¼ˆå†…å«åŒäººäºŒæ¬¡åˆ›ä½œå†…å®¹ï¼‰</span>
                    </div>
                </div>

                <div class="disclaimer-item">
                    <span class="disclaimer-bullet">ğŸ’­</span>
                    <div class="disclaimer-text">
                        <span class="disclaimer-jp">æ°—ã«ãªã‚‹æ–¹ã¯ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ä»¥å¤–ã®ã‚¢ãƒ—ãƒªã‚’ãŠæ§ãˆãã ã•ã„</span>
                        <span class="disclaimer-cn">ï¼ˆå¦‚ä»‹æ„è¯·å‹¿æ‰“å¼€æ’­æ”¾å™¨ä»¥å¤–çš„åº”ç”¨ï¼‰</span>
                    </div>
                </div>
            </div>

            <button class="disclaimer-btn" onclick="showPasswordPage()">
                <span>åŒæ„ã—ã¦ç¶šã‘ã‚‹</span>
                <span class="disclaimer-btn-sub">ï¼ˆåŒæ„å¹¶ç»§ç»­ï¼‰</span>
            </button>
        </div>
    </div>

    <!-- å¯†ç è¾“å…¥é¡µé¢ -->
    <div class="password-overlay" id="password-overlay">
        <div class="password-container">
            <div class="password-header">
                <div class="password-icon">ğŸ”</div>
                <h1 class="password-title">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›</h1>
                <p class="password-subtitle">å¯†ç éªŒè¯</p>
            </div>

            <div class="password-input-wrapper">
                <input type="text" class="password-input" id="password-input" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›..." autocomplete="off">
                <div class="password-error" id="password-error">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™ï¼ˆå¯†ç é”™è¯¯ï¼‰</div>
            </div>

            <button class="password-btn" onclick="checkPassword()">
                <span>ç¢ºèª</span>
                <span class="password-btn-sub">ï¼ˆç¡®è®¤ï¼‰</span>
            </button>

            <div class="password-back" onclick="showDisclaimerPage()">
                â† æˆ»ã‚‹ï¼ˆè¿”å›ï¼‰
            </div>
        </div>
    </div>

    <div class="phone-container">
        <div class="phone-frame">
            <!-- å£çº¸ -->
            <div class="wallpaper">
                <!-- é—ªçƒæ˜Ÿæ˜Ÿ -->
                <div class="stars">
                    <div class="star"></div>
                    <div class="star"></div>
                    <div class="star"></div>
                    <div class="star"></div>
                    <div class="star"></div>
                    <div class="star"></div>
                    <div class="star"></div>
                    <div class="star"></div>
                    <div class="star"></div>
                    <div class="star"></div>
                    <div class="star"></div>
                    <div class="star"></div>
                </div>
            </div>

            <!-- çŠ¶æ€æ  -->
            <div class="status-bar">
                <span class="time" id="status-time">12:00</span>
                <div class="status-icons">
                    <svg class="icon-signal" viewBox="0 0 24 24" fill="currentColor">
                        <rect x="2" y="14" width="3" height="8" rx="1"/>
                        <rect x="7" y="10" width="3" height="12" rx="1"/>
                        <rect x="12" y="6" width="3" height="16" rx="1"/>
                        <rect x="17" y="2" width="3" height="20" rx="1"/>
                    </svg>
                    <svg class="icon-wifi" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 18c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm-4.9-2.3l1.4 1.4C9.4 16.4 10.6 16 12 16s2.6.4 3.5 1.1l1.4-1.4C15.6 14.6 13.9 14 12 14s-3.6.6-4.9 1.7zm-2.8-2.8l1.4 1.4C7.3 13 9.5 12 12 12s4.7 1 6.3 2.3l1.4-1.4C17.7 11.1 15 10 12 10s-5.7 1.1-7.7 2.9z"/>
                    </svg>
                    <svg class="icon-battery" viewBox="0 0 24 24" fill="currentColor">
                        <rect x="2" y="6" width="18" height="12" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                        <rect x="4" y="8" width="12" height="8" rx="1"/>
                        <rect x="20" y="9" width="2" height="6" rx="1"/>
                    </svg>
                </div>
            </div>

            <!-- ä¸»å±å¹• -->
            <div class="home-screen active" id="home-screen">
                <!-- æ—¥æœŸæ˜¾ç¤º -->
                <div class="date-display">
                    <div class="date-main">11æœˆ25æ—¥</div>
                    <div class="date-sub">2022å¹´ é‡‘æ›œæ—¥</div>
                    <!-- è¯—å¥ -->
                    <div class="quote">
                        <p>ä½•ã«ã‚‚è€ƒãˆãšã«åºƒã„ç©ºã‚’è¦‹ä¸Šã’ã¦ã‚‹ã¨</p>
                        <p>è‡ªåˆ†ã®æ‚©ã‚“ã§ã‚‹ã“ã¨ãŒãªã‚“ã ã‹ã¡ã£ã½ã‘ã«æ€ãˆã¦ãã¦</p>
                    </div>
                </div>

                <div class="app-grid">
                    <!-- æ’­æ”¾å™¨ï¼šæˆ´è€³æœºçš„é»‘çŒ«å¤´ -->
                    <div class="app-icon" data-app="player">
                        <div class="cat-icon">
                            <svg viewBox="0 0 60 60" fill="#1a1520">
                                <!-- çŒ«å¤´è½®å»“ -->
                                <path d="M30 52 C12 52 4 40 4 28 C4 20 8 14 12 10 L18 2 L24 14 C26 13.5 28 13.2 30 13.2 C32 13.2 34 13.5 36 14 L42 2 L48 10 C52 14 56 20 56 28 C56 40 48 52 30 52 Z"/>
                                <!-- å·¦è€³å†… -->
                                <path d="M14 12 L18 6 L21 14 Z" fill="#f5d4c8"/>
                                <!-- å³è€³å†… -->
                                <path d="M46 12 L42 6 L39 14 Z" fill="#f5d4c8"/>
                                <!-- å·¦çœ¼ç™½ -->
                                <ellipse cx="20" cy="30" rx="8" ry="9" fill="white"/>
                                <!-- å³çœ¼ç™½ -->
                                <ellipse cx="40" cy="30" rx="8" ry="9" fill="white"/>
                                <!-- å·¦çœ¼ç  -->
                                <circle cx="22" cy="31" r="5" fill="#1a1520"/>
                                <!-- å³çœ¼ç  -->
                                <circle cx="42" cy="31" r="5" fill="#1a1520"/>
                                <!-- çœ¼ç›é«˜å…‰ -->
                                <circle cx="19" cy="28" r="2" fill="white"/>
                                <circle cx="39" cy="28" r="2" fill="white"/>
                                <!-- è€³æœº -->
                                <path d="M4 24 Q0 16 10 12" stroke="#e8945a" stroke-width="3" fill="none" stroke-linecap="round"/>
                                <path d="M56 24 Q60 16 50 12" stroke="#e8945a" stroke-width="3" fill="none" stroke-linecap="round"/>
                                <circle cx="4" cy="26" r="5" fill="#e8945a"/>
                                <circle cx="56" cy="26" r="5" fill="#e8945a"/>
                            </svg>
                        </div>
                        <span class="app-name">ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼</span>
                    </div>

                    <!-- æ¶ˆæ¯ï¼šçœ¯çœ¼ç¬‘çš„é»‘çŒ«å¤´+æ°”æ³¡ -->
                    <div class="app-icon" data-app="messages">
                        <div class="cat-icon">
                            <svg viewBox="0 0 60 60" fill="#1a1520">
                                <!-- çŒ«å¤´è½®å»“ -->
                                <path d="M30 52 C12 52 4 40 4 28 C4 20 8 14 12 10 L18 2 L24 14 C26 13.5 28 13.2 30 13.2 C32 13.2 34 13.5 36 14 L42 2 L48 10 C52 14 56 20 56 28 C56 40 48 52 30 52 Z"/>
                                <!-- å·¦è€³å†… -->
                                <path d="M14 12 L18 6 L21 14 Z" fill="#e8d0e0"/>
                                <!-- å³è€³å†… -->
                                <path d="M46 12 L42 6 L39 14 Z" fill="#e8d0e0"/>
                                <!-- çœ¯çœ¯çœ¼ - å¼€å¿ƒ -->
                                <path d="M12 30 Q20 24 28 30" stroke="white" stroke-width="4" fill="none" stroke-linecap="round"/>
                                <path d="M32 30 Q40 24 48 30" stroke="white" stroke-width="4" fill="none" stroke-linecap="round"/>
                                <!-- å°å˜´ -->
                                <ellipse cx="30" cy="42" rx="3" ry="2" fill="#d4707a"/>
                                <!-- æ°”æ³¡ -->
                                <circle cx="52" cy="8" r="7" fill="white" stroke="#1a1520" stroke-width="1"/>
                                <circle cx="50" cy="7" r="1.5" fill="#1a1520"/>
                                <circle cx="54" cy="7" r="1.5" fill="#1a1520"/>
                                <path d="M48 9 Q50 11 52 9" stroke="#1a1520" stroke-width="1" fill="none"/>
                            </svg>
                        </div>
                        <span class="app-name">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</span>
                        <span class="notification-badge">3</span>
                    </div>

                    <!-- æ—¥è®°ï¼šæ²‰æ€å‘ä¸‹çœ‹çš„é»‘çŒ«å¤´ -->
                    <div class="app-icon" data-app="diary">
                        <div class="cat-icon">
                            <svg viewBox="0 0 60 60" fill="#1a1520">
                                <!-- çŒ«å¤´è½®å»“ -->
                                <path d="M30 52 C12 52 4 40 4 28 C4 20 8 14 12 10 L18 2 L24 14 C26 13.5 28 13.2 30 13.2 C32 13.2 34 13.5 36 14 L42 2 L48 10 C52 14 56 20 56 28 C56 40 48 52 30 52 Z"/>
                                <!-- å·¦è€³å†… -->
                                <path d="M14 12 L18 6 L21 14 Z" fill="#c8d8e8"/>
                                <!-- å³è€³å†… -->
                                <path d="M46 12 L42 6 L39 14 Z" fill="#c8d8e8"/>
                                <!-- å·¦çœ¼ç™½ -->
                                <ellipse cx="20" cy="30" rx="8" ry="9" fill="white"/>
                                <!-- å³çœ¼ç™½ -->
                                <ellipse cx="40" cy="30" rx="8" ry="9" fill="white"/>
                                <!-- å·¦çœ¼ç  - å‘ä¸‹çœ‹ -->
                                <circle cx="20" cy="34" r="5" fill="#1a1520"/>
                                <!-- å³çœ¼ç  - å‘ä¸‹çœ‹ -->
                                <circle cx="40" cy="34" r="5" fill="#1a1520"/>
                                <!-- çœ¼ç›é«˜å…‰ -->
                                <circle cx="18" cy="32" r="2" fill="white"/>
                                <circle cx="38" cy="32" r="2" fill="white"/>
                                <!-- ä¹¦æœ¬æ ‡è®° -->
                                <rect x="22" y="44" width="16" height="3" rx="1" fill="#c8d8e8"/>
                                <line x1="30" y1="44" x2="30" y2="47" stroke="#1a1520" stroke-width="1"/>
                            </svg>
                        </div>
                        <span class="app-name">æ—¥è¨˜</span>
                    </div>

                    <!-- å¤‡å¿˜å½•ï¼šæ­ªå¤´çš„é»‘çŒ«å¤´ -->
                    <div class="app-icon" data-app="memo">
                        <div class="cat-icon">
                            <svg viewBox="0 0 60 60" fill="#1a1520">
                                <!-- çŒ«å¤´è½®å»“ - å¾®å¾®æ­ªå¤´ -->
                                <path d="M30 52 C12 52 4 40 4 28 C4 20 8 14 12 10 L18 2 L24 14 C26 13.5 28 13.2 30 13.2 C32 13.2 34 13.5 36 14 L42 2 L48 10 C52 14 56 20 56 28 C56 40 48 52 30 52 Z" transform="rotate(-5 30 30)"/>
                                <!-- å·¦è€³å†… -->
                                <path d="M14 12 L18 6 L21 14 Z" fill="#e0dcd4" transform="rotate(-5 30 30)"/>
                                <!-- å³è€³å†… -->
                                <path d="M46 12 L42 6 L39 14 Z" fill="#e0dcd4" transform="rotate(-5 30 30)"/>
                                <!-- å·¦çœ¼ç™½ -->
                                <ellipse cx="20" cy="30" rx="8" ry="9" fill="white" transform="rotate(-5 30 30)"/>
                                <!-- å³çœ¼ç™½ -->
                                <ellipse cx="40" cy="30" rx="8" ry="9" fill="white" transform="rotate(-5 30 30)"/>
                                <!-- å·¦çœ¼ç  -->
                                <circle cx="22" cy="31" r="5" fill="#1a1520" transform="rotate(-5 30 30)"/>
                                <!-- å³çœ¼ç  -->
                                <circle cx="42" cy="31" r="5" fill="#1a1520" transform="rotate(-5 30 30)"/>
                                <!-- çœ¼ç›é«˜å…‰ -->
                                <circle cx="19" cy="28" r="2" fill="white" transform="rotate(-5 30 30)"/>
                                <circle cx="39" cy="28" r="2" fill="white" transform="rotate(-5 30 30)"/>
                                <!-- é“…ç¬” -->
                                <rect x="48" y="2" width="4" height="18" rx="1" fill="#e8945a" transform="rotate(20 50 10)"/>
                                <path d="M52 20 L54 26 L50 26 Z" fill="#f5d4c8" transform="rotate(20 50 10)"/>
                            </svg>
                        </div>
                        <span class="app-name">ãƒ¡ãƒ¢</span>
                    </div>

                    <!-- æµè§ˆå™¨ï¼šå¥½å¥‡å¤§çœ¼é»‘çŒ«å¤´ -->
                    <div class="app-icon" data-app="browser">
                        <div class="cat-icon">
                            <svg viewBox="0 0 60 60" fill="#1a1520">
                                <!-- çŒ«å¤´è½®å»“ -->
                                <path d="M30 52 C12 52 4 40 4 28 C4 20 8 14 12 10 L18 2 L24 14 C26 13.5 28 13.2 30 13.2 C32 13.2 34 13.5 36 14 L42 2 L48 10 C52 14 56 20 56 28 C56 40 48 52 30 52 Z"/>
                                <!-- å·¦è€³å†… -->
                                <path d="M14 12 L18 6 L21 14 Z" fill="#d4d0e0"/>
                                <!-- å³è€³å†… -->
                                <path d="M46 12 L42 6 L39 14 Z" fill="#d4d0e0"/>
                                <!-- å·¦çœ¼ç™½ - æ›´å¤§æ›´åœ† -->
                                <ellipse cx="20" cy="28" rx="10" ry="11" fill="white"/>
                                <!-- å³çœ¼ç™½ - æ›´å¤§æ›´åœ† -->
                                <ellipse cx="40" cy="28" rx="10" ry="11" fill="white"/>
                                <!-- å·¦çœ¼ç  -->
                                <circle cx="22" cy="30" r="6" fill="#1a1520"/>
                                <!-- å³çœ¼ç  -->
                                <circle cx="42" cy="30" r="6" fill="#1a1520"/>
                                <!-- çœ¼ç›é«˜å…‰ - å¤§ -->
                                <circle cx="19" cy="26" r="3" fill="white"/>
                                <circle cx="39" cy="26" r="3" fill="white"/>
                                <!-- å°åœ°çƒ -->
                                <circle cx="50" cy="50" r="8" fill="none" stroke="#8b6b8a" stroke-width="2"/>
                                <ellipse cx="50" cy="50" rx="8" ry="3" fill="none" stroke="#8b6b8a" stroke-width="1.5"/>
                                <line x1="50" y1="42" x2="50" y2="58" stroke="#8b6b8a" stroke-width="1.5"/>
                            </svg>
                        </div>
                        <span class="app-name">ãƒ–ãƒ©ã‚¦ã‚¶</span>
                    </div>

                    <!-- æ—¥å†ï¼šæ™®é€šè¡¨æƒ…é»‘çŒ«å¤´+æ—¥å†è§’æ ‡ -->
                    <div class="app-icon" data-app="calendar">
                        <div class="cat-icon">
                            <svg viewBox="0 0 60 60" fill="#1a1520">
                                <!-- çŒ«å¤´è½®å»“ -->
                                <path d="M30 52 C12 52 4 40 4 28 C4 20 8 14 12 10 L18 2 L24 14 C26 13.5 28 13.2 30 13.2 C32 13.2 34 13.5 36 14 L42 2 L48 10 C52 14 56 20 56 28 C56 40 48 52 30 52 Z"/>
                                <!-- å·¦è€³å†… -->
                                <path d="M14 12 L18 6 L21 14 Z" fill="#f0e0c8"/>
                                <!-- å³è€³å†… -->
                                <path d="M46 12 L42 6 L39 14 Z" fill="#f0e0c8"/>
                                <!-- å·¦çœ¼ç™½ -->
                                <ellipse cx="20" cy="30" rx="8" ry="9" fill="white"/>
                                <!-- å³çœ¼ç™½ -->
                                <ellipse cx="40" cy="30" rx="8" ry="9" fill="white"/>
                                <!-- å·¦çœ¼ç  -->
                                <circle cx="22" cy="31" r="5" fill="#1a1520"/>
                                <!-- å³çœ¼ç  -->
                                <circle cx="42" cy="31" r="5" fill="#1a1520"/>
                                <!-- çœ¼ç›é«˜å…‰ -->
                                <circle cx="19" cy="28" r="2" fill="white"/>
                                <circle cx="39" cy="28" r="2" fill="white"/>
                                <!-- æ—¥å†è§’æ ‡ -->
                                <rect x="42" y="42" width="16" height="14" rx="2" fill="white" stroke="#c9a86c" stroke-width="2"/>
                                <rect x="42" y="42" width="16" height="5" rx="2" fill="#c9a86c"/>
                                <text x="50" y="54" font-size="9" font-weight="bold" text-anchor="middle" fill="#1a1520">25</text>
                            </svg>
                        </div>
                        <span class="app-name">ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</span>
                    </div>
                </div>
            </div>

            <!-- Appé¡µé¢å®¹å™¨ -->
            <div class="app-view" id="app-view">
                <div class="app-header">
                    <button class="back-btn" id="back-btn">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                    </button>
                    <span class="app-title" id="app-title"></span>
                </div>
                <div class="app-content" id="app-content"></div>
            </div>

            <!-- iPhoneé£æ ¼åº•éƒ¨æ¨ªæ¡ -->
            <div class="home-bar"></div>
        </div>
    </div>

    <!-- è¿·ä½ æ’­æ”¾å™¨ -->
    <div class="player-mini" id="player-mini" onclick="openMiniPlayer()">
        <img class="player-mini-cover" id="player-mini-cover" src="Graph/BK/BJ643496_img_main.webp" alt="">
        <div class="player-mini-info">
            <div class="player-mini-title" id="player-mini-title">-</div>
            <div class="player-mini-subtitle" id="player-mini-subtitle">-</div>
        </div>
        <button class="player-mini-play" id="player-mini-play" onclick="toggleMiniPlay(event)">
            <svg viewBox="0 0 24 24" fill="currentColor" id="player-mini-play-icon">
                <path d="M8 5v14l11-7z"/>
            </svg>
        </button>
        <button class="player-mini-close" onclick="closeMiniPlayer(event)">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
        </button>
        <div class="player-mini-progress">
            <div class="player-mini-progress-fill" id="player-mini-progress-fill"></div>
        </div>
    </div>

    <script>
        // ========================================
        // TELL ME WHY - ãƒãƒ„ã‚¨ã®æºå¸¯
        // ========================================

        // ========================================
        // å…è´£å£°æ˜å’Œå¯†ç éªŒè¯
        // ========================================

        // æ˜¾ç¤ºå¯†ç é¡µé¢
        function showPasswordPage() {
            document.getElementById('disclaimer-overlay').classList.add('hidden');
            document.getElementById('password-overlay').classList.add('visible');
            document.getElementById('password-input').focus();
        }

        // è¿”å›å…è´£å£°æ˜é¡µé¢
        function showDisclaimerPage() {
            document.getElementById('password-overlay').classList.remove('visible');
            document.getElementById('disclaimer-overlay').classList.remove('hidden');
            document.getElementById('password-input').value = '';
            document.getElementById('password-error').classList.remove('visible');
        }

        // ç”ŸæˆåŠ¨æ€å¯†ç 
        function generatePassword() {
            const now = new Date();
            const month = now.getMonth() + 1; // 1-12
            const year = now.getFullYear();

            // è·å–æœ¬æœˆæœ€åä¸€å¤©
            const lastDay = new Date(year, month, 0).getDate();

            // å¯†ç è§„åˆ™: tmw + (æœˆä»½*2+3) + (æœ¬æœˆæœ€åä¸€å¤©-7)
            const part1 = month * 2 + 3;
            const part2 = lastDay - 7;

            // æœˆä»½éƒ¨åˆ†ï¼šå¦‚æœå°äº10ï¼Œè¡¥é›¶
            const part1Str = part1 < 10 ? '0' + part1 : String(part1);
            const part2Str = part2 < 10 ? '0' + part2 : String(part2);

            return 'tmw' + part1Str + part2Str;
        }

        // éªŒè¯å¯†ç 
        function checkPassword() {
            const input = document.getElementById('password-input').value.trim().toLowerCase();
            const correctPassword = generatePassword();

            if (input === correctPassword) {
                // å¯†ç æ­£ç¡®ï¼Œæ˜¾ç¤ºæ‰‹æœºé¡µé¢
                document.getElementById('password-overlay').classList.add('success');
                setTimeout(() => {
                    document.getElementById('password-overlay').style.display = 'none';
                    document.querySelector('.phone-container').classList.add('visible');
                }, 500);
            } else {
                // å¯†ç é”™è¯¯ï¼Œæ˜¾ç¤ºé”™è¯¯æç¤º
                document.getElementById('password-error').classList.add('visible');
                document.getElementById('password-input').classList.add('shake');
                setTimeout(() => {
                    document.getElementById('password-input').classList.remove('shake');
                }, 500);
            }
        }

        // ç›‘å¬å›è½¦é”®
        document.addEventListener('DOMContentLoaded', () => {
            const passwordInput = document.getElementById('password-input');
            if (passwordInput) {
                passwordInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        checkPassword();
                    }
                });
                passwordInput.addEventListener('input', () => {
                    document.getElementById('password-error').classList.remove('visible');
                });
            }
        });

        // ========================================
        // åº”ç”¨é…ç½®
        // ========================================

        const APP_CONFIG = {
            player: { title: 'ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼' },
            messages: { title: 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸' },
            diary: { title: 'æ—¥è¨˜' },
            memo: { title: 'ãƒ¡ãƒ¢' },
            browser: { title: 'ãƒ–ãƒ©ã‚¦ã‚¶' },
            calendar: { title: 'ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼' }
        };

        const APP_PLACEHOLDERS = {
            player: null, // æ’­æ”¾å™¨æœ‰ä¸“é—¨çš„æ¸²æŸ“é€»è¾‘
            messages: `<div class="app-placeholder">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/></svg>
                <p>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸<br>æº–å‚™ä¸­...</p>
            </div>`,
            diary: `<div class="app-placeholder">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/></svg>
                <p>æ—¥è¨˜<br>æº–å‚™ä¸­...</p>
            </div>`,
            memo: null, // å¤‡å¿˜å½•æœ‰ä¸“é—¨çš„æ¸²æŸ“é€»è¾‘
            browser: `<div class="app-placeholder">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
                <p>ãƒ–ãƒ©ã‚¦ã‚¶<br>æº–å‚™ä¸­...</p>
            </div>`,
            calendar: null // æ—¥å†æœ‰ä¸“é—¨çš„æ¸²æŸ“é€»è¾‘
        };

        let currentApp = null;
        let homeScreen, appView, appContent, appTitle, backBtn;

        // æ—¥è®°æ•°æ®
        let diaryData = [];
        let diaryDataLoaded = false;
        let diaryViewState = 'list'; // 'list' or 'detail'

        // æ ¼å¼åŒ–æ—¶é—´
        function formatTime(seconds) {
            if (!seconds || isNaN(seconds)) return '00:00';
            const m = Math.floor(seconds / 60);
            const s = Math.floor(seconds % 60);
            return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        }

        document.addEventListener('DOMContentLoaded', async () => {
            homeScreen = document.getElementById('home-screen');
            appView = document.getElementById('app-view');
            appContent = document.getElementById('app-content');
            appTitle = document.getElementById('app-title');
            backBtn = document.getElementById('back-btn');

            // é¢„åŠ è½½æ•°æ®
            await Promise.all([
                loadDiaryData(),
                loadPlayerData()
            ]);

            // Appå›¾æ ‡ç‚¹å‡»
            document.querySelectorAll('.app-icon').forEach(icon => {
                icon.addEventListener('click', () => {
                    const appId = icon.dataset.app;
                    if (appId) openApp(appId);
                });
            });

            // è¿”å›æŒ‰é’®
            backBtn.addEventListener('click', closeApp);

            // é”®ç›˜æ§åˆ¶
            document.addEventListener('keydown', (e) => {
                // æ’­æ”¾å™¨é”®ç›˜æ§åˆ¶
                if (currentApp === 'player' && playerViewState === 'playing') {
                    const historyPanel = document.getElementById('player-history-panel');
                    if (historyPanel && historyPanel.classList.contains('active')) {
                        if (e.key === 'Escape') hidePlayerHistory();
                        return;
                    }

                    if (e.code === 'Space') {
                        e.preventDefault();
                        togglePlayerPlay();
                    } else if (e.code === 'ArrowLeft') {
                        seekRelative(-5);
                    } else if (e.code === 'ArrowRight') {
                        seekRelative(5);
                    } else if (e.key === 'Escape') {
                        minimizePlayer();
                    }
                    return;
                }

                // æ™®é€šEscapeè¿”å›
                if (e.key === 'Escape' && currentApp) closeApp();
            });

            // æ›´æ–°çŠ¶æ€æ æ—¶é—´
            updateStatusTime();
            setInterval(updateStatusTime, 1000);
        });

        async function openApp(appId) {
            if (!APP_CONFIG[appId]) return;
            currentApp = appId;
            appTitle.textContent = APP_CONFIG[appId].title;

            // æ ¹æ®ä¸åŒappæ¸²æŸ“ä¸åŒå†…å®¹
            if (appId === 'player') {
                // æ’­æ”¾å™¨
                if (!playerDataLoaded) {
                    await loadPlayerData();
                }
                appContent.innerHTML = renderPlayerList();
            } else if (appId === 'diary') {
                // ç¡®ä¿æ•°æ®å·²åŠ è½½
                if (!diaryDataLoaded) {
                    await loadDiaryData();
                }
                appContent.innerHTML = renderDiaryList();
            } else if (appId === 'calendar') {
                // æ—¥å†
                appContent.innerHTML = renderCalendar();
            } else if (appId === 'memo') {
                // å¤‡å¿˜å½•
                appContent.innerHTML = renderMemoList();
            } else if (appId === 'browser') {
                // æµè§ˆå™¨/æœç´¢å†å²
                appContent.innerHTML = renderBrowser();
            } else if (appId === 'messages') {
                // æ¶ˆæ¯
                appContent.innerHTML = renderChatList();
            } else {
                appContent.innerHTML = APP_PLACEHOLDERS[appId] || '<div class="app-placeholder"><p>Unknown App</p></div>';
            }

            homeScreen.classList.remove('active');
            appView.classList.add('active');

            // è¿›å…¥appæ—¶éšè—è¿·ä½ æ’­æ”¾å™¨
            hideMiniPlayer();
        }

        function closeApp() {
            currentApp = null;
            appView.classList.remove('active');
            homeScreen.classList.add('active');
            setTimeout(() => { appContent.innerHTML = ''; }, 400);

            // å¦‚æœæœ‰æ­£åœ¨æ’­æ”¾çš„æ›²ç›®ï¼Œæ˜¾ç¤ºè¿·ä½ æ’­æ”¾å™¨
            updateMiniPlayerVisibility();
        }

        function updateStatusTime() {
            const timeEl = document.getElementById('status-time');
            if (timeEl) {
                const now = new Date();
                timeEl.textContent = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            }
        }

        // ========================================
        // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ App
        // ========================================

        let playerData = null;
        let playerDataLoaded = false;
        let currentTrack = null;
        let currentSubtitles = [];
        let currentSubtitleIndex = -1;
        let subtitleHistory = [];
        let isPlaying = false;
        let playerViewState = 'list'; // 'list' or 'playing'
        let currentPlaybackSpeed = 1;
        let subtitleSearchQuery = '';
        let subtitleMode = 'both'; // 'both', 'cn', 'jp'
        const audio = new Audio();
        const PLAYER_STORAGE_KEY = 'tmw_player_progress';

        // è¯´è¯äººå¤´åƒé…ç½®
        const speakerAvatars = {
            'æ¾æ±Ÿ': 'Graph/BK/matsue_avatar.png',
            'æš´å¾’': '',
            'ä¸‰ä¸Š': '',
            'é«˜æ¡¥': ''
        };

        // åŠ è½½æ’­æ”¾å™¨æ•°æ®
        async function loadPlayerData() {
            try {
                const response = await fetch('data/tracks.json');
                playerData = await response.json();
                playerDataLoaded = true;
                console.log('Player data loaded:', playerData.tracks.length, 'tracks');
            } catch (e) {
                console.error('Failed to load player data:', e);
                playerData = null;
                playerDataLoaded = false;
            }
        }

        // è§£æSRTå­—å¹•æ–‡ä»¶
        async function loadSubtitles(subtitleFile) {
            try {
                const response = await fetch(subtitleFile);
                const text = await response.text();
                return parseSRT(text);
            } catch (e) {
                console.error('Failed to load subtitles:', e);
                return [];
            }
        }

        // è§£æSRTæ ¼å¼
        function parseSRT(srtText) {
            const subtitles = [];
            // ç»Ÿä¸€æ¢è¡Œç¬¦ä¸º \nï¼Œå¤„ç† Windows çš„ \r\n
            const normalizedText = srtText.replace(/\r\n/g, '\n').replace(/\r/g, '\n');
            const blocks = normalizedText.trim().split(/\n\n+/);

            for (const block of blocks) {
                const lines = block.split('\n');
                if (lines.length < 3) continue;

                // è§£ææ—¶é—´ç 
                const timeMatch = lines[1].match(/(\d{2}):(\d{2}):(\d{2}),(\d{3})\s*-->\s*(\d{2}):(\d{2}):(\d{2}),(\d{3})/);
                if (!timeMatch) continue;

                const start = parseInt(timeMatch[1]) * 3600 + parseInt(timeMatch[2]) * 60 + parseInt(timeMatch[3]) + parseInt(timeMatch[4]) / 1000;
                const end = parseInt(timeMatch[5]) * 3600 + parseInt(timeMatch[6]) * 60 + parseInt(timeMatch[7]) + parseInt(timeMatch[8]) / 1000;

                // ä¸­æ–‡å’Œæ—¥æ–‡ï¼ˆå»é™¤å¯èƒ½æ®‹ç•™çš„ç©ºç™½ï¼‰
                const cn = (lines[2] || '').trim();
                const jp = (lines[3] || '').trim();

                // æ£€æµ‹è¯´è¯äºº
                let speaker = null;
                if (currentTrack) {
                    speaker = detectSpeaker(cn, jp, start, currentTrack.id);
                }

                subtitles.push({ start, end, cn, jp, speaker });
            }

            return subtitles;
        }

        // æ ¹æ®è½¨é“å’Œæ—¶é—´æ£€æµ‹è¯´è¯äºº
        function detectSpeaker(cn, jp, startTime, trackId) {
            // å„è½¨é“çš„è¯´è¯äººè§„åˆ™
            const trackRules = {
                // ç¬¬ä¸€è½¨ï¼šæ­£ç¾©ã®å‘³æ–¹ - æ¾æ±Ÿæ•‘ä¸‹å¥³ä¸»ï¼Œé«˜æ¡¥ä»‹ç»
                1: [
                    { time: [26, 66], speaker: 'æš´å¾’' },
                    { time: [66, 68.5], speaker: 'æ¾æ±Ÿ' },
                    { time: [68.5, 70], speaker: 'æš´å¾’' },
                    { time: [70, 72], speaker: 'æ¾æ±Ÿ' },
                    { time: [82, 127], speaker: 'æ¾æ±Ÿ' },
                    { time: [127, 130], speaker: 'é«˜æ¡¥' },
                    { time: [134, 139], speaker: 'æ¾æ±Ÿ' },
                    { time: [139, 141], speaker: 'é«˜æ¡¥' },
                    { time: [143, 218], speaker: 'é«˜æ¡¥' },
                    { time: [218, 240], speaker: 'æ¾æ±Ÿ' },
                    { time: [240, 620], speaker: 'æ¾æ±Ÿ' }
                ],
                // ç¬¬äºŒè½¨ï¼šä»˜å’Œé›·åŒ - æ¾æ±Ÿç‹¬ç™½
                2: [
                    { time: [0, 300], speaker: 'æ¾æ±Ÿ' }
                ],
                // ç¬¬ä¸‰è½¨ï¼šæœ›éƒ·ã®ç©º - æ¾æ±Ÿç‹¬ç™½
                3: [
                    { time: [0, 300], speaker: 'æ¾æ±Ÿ' }
                ],
                // ç¬¬å››è½¨ï¼šå½è–¬ã‚’é£²ã¿ã€åŠã‚Šæ©‹ã‚’æ¸¡ã‚‹ - æ¾æ±Ÿå’Œå¥³ä¸»çº¦ä¼šï¼Œæš´å¾’å‡ºç°å¨èƒ
                4: [
                    { time: [0, 121], speaker: 'æ¾æ±Ÿ' },      // å¼€å¤´æ¾æ±Ÿå’Œå¥³ä¸»å¯¹è¯
                    { time: [121, 183], speaker: 'æš´å¾’' },    // 00:02:01 - 00:03:02 æš´å¾’å¨èƒ
                    { time: [183, 800], speaker: 'æ¾æ±Ÿ' }     // ä¹‹åæ¾æ±Ÿç»§ç»­
                ],
                // ç¬¬äº”è½¨ï¼šæ­£ç¾©ã®è¦‹æ–¹ - æ¾æ±Ÿæ‰“ç”µè¯ï¼Œä¸‰ä¸Šæ¥ç”µè¯æ­éœ²çœŸç›¸
                5: [
                    { time: [0, 82], speaker: 'æ¾æ±Ÿ' },       // å¼€å¤´æ¾æ±Ÿæ‰“ç”µè¯
                    { time: [82, 275], speaker: 'ä¸‰ä¸Š' },     // 00:01:22 - 00:04:34 ä¸‰ä¸Šæ‰“ç”µè¯æ­éœ²çœŸç›¸
                    { time: [275, 300], speaker: 'æ¾æ±Ÿ' }     // æœ€åï¼ˆå¦‚æœæœ‰ï¼‰
                ],
                // ç¬¬å…­è½¨ï¼šCOllaPse - æ¾æ±Ÿç‹¬ç™½/å‰§æƒ…
                6: [
                    { time: [0, 2500], speaker: 'æ¾æ±Ÿ' }
                ],
                // ç¬¬ä¸ƒè½¨ï¼šä¹…é  - æ¾æ±Ÿç‹¬ç™½
                7: [
                    { time: [0, 500], speaker: 'æ¾æ±Ÿ' }
                ],
                // ç¬¬ä¹è½¨ï¼šä¹ä»ã®åŠŸã‚’ä¸€ç°£ã«è™§ã - æ¾æ±Ÿç‹¬ç™½
                9: [
                    { time: [0, 1100], speaker: 'æ¾æ±Ÿ' }
                ]
            };

            const rules = trackRules[trackId];
            if (!rules) return null;

            for (const rule of rules) {
                if (startTime >= rule.time[0] && startTime < rule.time[1]) {
                    return rule.speaker;
                }
            }
            return null;
        }

        // æ¸²æŸ“æ’­æ”¾å™¨åˆ—è¡¨
        function renderPlayerList() {
            playerViewState = 'list';
            if (!playerData) {
                return `<div class="app-placeholder">
                    <div class="player-loading-spinner"></div>
                    <p>èª­ã¿è¾¼ã¿ä¸­...</p>
                </div>`;
            }

            const progress = getAllPlayerProgress();

            let html = `
                <div class="player-app">
                    <div class="player-track-list">
                        <div class="player-album-header">
                            <div class="player-cover-container">
                                <div class="player-cover-glow"></div>
                                <img class="player-cover" src="Graph/BK/BJ643496_img_main.webp" alt="Cover" onerror="this.src='Graph/IMG_8477.JPEG'">
                            </div>
                            <h1 class="player-album-title">${playerData.albumTitle}</h1>
                            <p class="player-album-artist">${playerData.artist}</p>
                        </div>
                        <div class="player-list-header">
                            <span class="player-list-title">TRACKS</span>
                            <span class="player-track-count">${playerData.tracks.length}æ›²</span>
                        </div>
            `;

            playerData.tracks.forEach((track, index) => {
                const trackProgress = progress[track.id];
                const hasProgress = trackProgress && trackProgress.time > 10;
                const isCurrentTrack = currentTrack && currentTrack.id === track.id;

                let progressHint = '';
                if (hasProgress) {
                    progressHint = `<div class="player-track-progress-hint">å‰å› ${formatTime(trackProgress.time)}</div>`;
                }

                html += `
                    <div class="player-track-item ${isCurrentTrack ? 'playing' : ''} ${hasProgress ? 'has-progress' : ''}"
                         data-track-id="${track.id}" onclick="playTrack(${track.id})">
                        <span class="player-track-number">${String(index + 1).padStart(2, '0')}</span>
                        <div class="player-now-playing-indicator">
                            <span></span><span></span><span></span>
                        </div>
                        <div class="player-track-info">
                            <div class="player-track-title-row">
                                <span class="player-track-name">${track.title}</span>
                                <span class="player-track-name-zh">${track.titleZh}</span>
                            </div>
                            ${progressHint}
                        </div>
                        <span class="player-track-duration">${track.duration}</span>
                    </div>
                `;
            });

            html += `
                    </div>
                    <!-- æ’­æ”¾ä¸­è§†å›¾ -->
                    <div class="player-now-view" id="player-now-view">
                        <div class="player-now-header">
                            <button class="player-minimize-btn" onclick="minimizePlayer()">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                                </svg>
                            </button>
                            <div class="player-now-track-info">
                                <div class="player-now-track-num" id="player-track-num">Track 01</div>
                                <div class="player-now-track-title" id="player-track-title">-</div>
                            </div>
                            <button class="player-history-btn" onclick="showPlayerHistory()">å›çœ‹</button>
                        </div>
                        <div class="player-now-cover-area">
                            <div class="player-now-cover-bg" id="player-cover-bg"></div>
                            <div class="player-now-cover-wrapper">
                                <img class="player-now-cover-img" id="player-cover-img" src="Graph/BK/BJ643496_img_main.webp" alt="Cover" onerror="this.src='Graph/IMG_8477.JPEG'">
                                <div class="player-cover-reflection">
                                    <img src="Graph/BK/BJ643496_img_main.webp" alt="" onerror="this.src='Graph/IMG_8477.JPEG'">
                                </div>
                            </div>
                        </div>
                        <div class="player-subtitle-area">
                            <div class="player-subtitle-speaker-wrapper" id="player-speaker-wrapper">
                                <img class="player-speaker-avatar" id="player-speaker-avatar" src="" alt="" style="display:none">
                                <div class="player-subtitle-speaker" id="player-speaker"></div>
                            </div>
                            <div class="player-subtitle-cn" id="player-subtitle-cn"></div>
                            <div class="player-subtitle-jp" id="player-subtitle-jp"></div>
                        </div>
                        <div class="player-controls-area">
                            <div class="player-progress-container">
                                <div class="player-progress-bar" id="player-progress-bar" onclick="seekToPosition(event)" onmousemove="showTimeTooltip(event)" onmouseleave="hideTimeTooltip()" ontouchstart="handleProgressTouchStart(event)" ontouchmove="handleProgressTouchMove(event)" ontouchend="handleProgressTouchEnd(event)">
                                    <div class="player-time-tooltip" id="player-time-tooltip">00:00</div>
                                    <div class="player-progress-fill" id="player-progress-fill">
                                        <div class="player-progress-handle"></div>
                                    </div>
                                </div>
                                <div class="player-time-display">
                                    <span id="player-current-time">00:00</span>
                                    <span id="player-total-time">00:00</span>
                                </div>
                            </div>
                            <div class="player-main-controls">
                                <button class="player-ctrl-btn player-seek-btn" onclick="seekRelative(-10)">
                                    <svg viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12.5 3C17.15 3 21.08 6.03 22.47 10.22L20.1 11C19.05 7.81 16.04 5.5 12.5 5.5C10.54 5.5 8.77 6.22 7.38 7.38L10 10H3V3L5.6 5.6C7.45 4 9.85 3 12.5 3M10 12V22H8V14H6V12H10M18 14V20C18 21.11 17.11 22 16 22H14C12.9 22 12 21.1 12 20V14C12 12.9 12.9 12 14 12H16C17.11 12 18 12.9 18 14M14 14V20H16V14H14Z"/>
                                    </svg>
                                </button>
                                <button class="player-ctrl-btn player-skip-btn" onclick="playPrevTrack()">
                                    <svg viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                                    </svg>
                                </button>
                                <button class="player-ctrl-btn player-play-btn" id="player-play-btn" onclick="togglePlayerPlay()">
                                    <svg viewBox="0 0 24 24" fill="currentColor" id="player-play-icon">
                                        <path d="M8 5v14l11-7z"/>
                                    </svg>
                                </button>
                                <button class="player-ctrl-btn player-skip-btn" onclick="playNextTrack()">
                                    <svg viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
                                    </svg>
                                </button>
                                <button class="player-ctrl-btn player-seek-btn" onclick="seekRelative(10)">
                                    <svg viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M11.5 3C6.85 3 2.92 6.03 1.53 10.22L3.9 11C4.95 7.81 7.96 5.5 11.5 5.5C13.46 5.5 15.23 6.22 16.62 7.38L14 10H21V3L18.4 5.6C16.55 4 14.15 3 11.5 3M10 12V22H8V14H6V12H10M18 14V20C18 21.11 17.11 22 16 22H14C12.9 22 12 21.1 12 20V14C12 12.9 12.9 12 14 12H16C17.11 12 18 12.9 18 14M14 14V20H16V14H14Z"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="player-aux-controls">
                                <div class="player-aux-left">
                                    <div class="player-subtitle-mode-wrapper">
                                        <button class="player-subtitle-mode-btn" id="player-subtitle-mode-btn" onclick="toggleSubtitleMode()">åŒè¯­</button>
                                    </div>
                                </div>
                                <div class="player-aux-right">
                                    <div class="player-speed-wrapper">
                                        <button class="player-speed-btn" id="player-speed-btn" onclick="toggleSpeedMenu()">1.0x</button>
                                        <div class="player-speed-menu" id="player-speed-menu">
                                            <button class="player-speed-option" onclick="setPlaybackSpeed(0.5)">0.5x</button>
                                            <button class="player-speed-option" onclick="setPlaybackSpeed(0.75)">0.75x</button>
                                            <button class="player-speed-option active" onclick="setPlaybackSpeed(1)">1.0x</button>
                                            <button class="player-speed-option" onclick="setPlaybackSpeed(1.25)">1.25x</button>
                                            <button class="player-speed-option" onclick="setPlaybackSpeed(1.5)">1.5x</button>
                                            <button class="player-speed-option" onclick="setPlaybackSpeed(2)">2.0x</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- å†å²é¢æ¿ -->
                        <div class="player-history-panel" id="player-history-panel">
                            <div class="player-history-header">
                                <h2 class="player-history-title">å­—å¹•å›çœ‹</h2>
                                <button class="player-history-close" onclick="hidePlayerHistory()">Ã—</button>
                            </div>
                            <div class="player-history-search">
                                <div class="player-search-wrapper" id="player-search-wrapper">
                                    <svg class="player-search-icon" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                                    </svg>
                                    <input type="text" class="player-search-input" id="player-search-input" placeholder="æœç´¢å­—å¹•..." oninput="searchSubtitles(this.value)">
                                    <button class="player-search-clear" onclick="clearSubtitleSearch()">Ã—</button>
                                </div>
                                <div class="player-search-results-info" id="player-search-results-info"></div>
                            </div>
                            <div class="player-history-list" id="player-history-list"></div>
                        </div>
                    </div>
                </div>
            `;

            return html;
        }

        // æ’­æ”¾æ›²ç›®
        async function playTrack(trackId) {
            const track = playerData.tracks.find(t => t.id === trackId);
            if (!track) return;

            currentTrack = track;
            subtitleHistory = [];
            currentSubtitleIndex = -1;

            // åŠ è½½å­—å¹•
            currentSubtitles = await loadSubtitles(track.subtitleFile);

            // æ›´æ–°UI
            const trackIndex = playerData.tracks.indexOf(track);
            document.getElementById('player-track-num').textContent = `Track ${String(trackIndex + 1).padStart(2, '0')}`;
            document.getElementById('player-track-title').textContent = track.title;
            document.getElementById('player-cover-img').src = 'Graph/BK/BJ643496_img_main.webp';
            document.getElementById('player-cover-bg').style.backgroundImage = 'url(Graph/BK/cover.webp)';

            // æ¸…ç©ºå­—å¹•
            clearPlayerSubtitle();

            // ä½¿ç”¨ tracks.json ä¸­çš„ duration ä½œä¸ºæ˜¾ç¤ºå€¼
            const totalTimeEl = document.getElementById('player-total-time');
            if (totalTimeEl && track.duration) {
                totalTimeEl.textContent = track.duration;
            }

            // æ˜¾ç¤ºæ’­æ”¾è§†å›¾
            showPlayerView();

            // åŠ è½½å¹¶æ’­æ”¾éŸ³é¢‘
            audio.src = track.audioFile;
            audio.load();

            // æ’­æ”¾
            const playPromise = audio.play();
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    console.log('[Audio] Play started successfully');
                    // æ¢å¤è¿›åº¦
                    const saved = getPlayerProgress(track.id);
                    if (saved && saved.time > 10) {
                        audio.currentTime = saved.time;
                    }
                }).catch((error) => {
                    console.error('[Audio] Play failed:', error.name, error.message);
                });
            }

            // æ›´æ–°æ›²ç›®åˆ—è¡¨ä¸­çš„æ’­æ”¾çŠ¶æ€
            document.querySelectorAll('.player-track-item').forEach(item => {
                item.classList.remove('playing');
                if (parseInt(item.dataset.trackId) === trackId) {
                    item.classList.add('playing');
                }
            });
        }

        // æ˜¾ç¤ºæ’­æ”¾è§†å›¾
        function showPlayerView() {
            playerViewState = 'playing';
            const view = document.getElementById('player-now-view');
            if (view) {
                view.classList.add('active');
            }
        }

        // æœ€å°åŒ–æ’­æ”¾å™¨
        function minimizePlayer() {
            playerViewState = 'list';
            const view = document.getElementById('player-now-view');
            if (view) {
                view.classList.remove('active');
            }
        }

        // æ’­æ”¾/æš‚åœ - iOS Safari å…¼å®¹
        function togglePlayerPlay() {
            if (!currentTrack) return;

            if (isPlaying) {
                audio.pause();
            } else {
                // iOS Safari éœ€è¦åœ¨ç”¨æˆ·äº¤äº’ä¸­ç›´æ¥è°ƒç”¨ play()
                // å¹¶æ­£ç¡®å¤„ç† Promise
                const playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log('[Audio] Play started successfully');
                    }).catch((error) => {
                        console.error('[Audio] Play failed:', error.name, error.message);
                        // å¦‚æœæ˜¯ NotAllowedErrorï¼Œå¯èƒ½éœ€è¦ç”¨æˆ·å†æ¬¡ç‚¹å‡»
                        if (error.name === 'NotAllowedError') {
                            alert('è¯·ç‚¹å‡»æ’­æ”¾æŒ‰é’®å¼€å§‹æ’­æ”¾');
                        }
                    });
                }
            }
            // æ³¨æ„ï¼šå®é™…çš„ isPlaying çŠ¶æ€ç”± play/pause äº‹ä»¶å¤„ç†
        }

        function updatePlayerPlayButton() {
            const icon = document.getElementById('player-play-icon');
            if (!icon) return;
            if (isPlaying) {
                icon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
            } else {
                icon.innerHTML = '<path d="M8 5v14l11-7z"/>';
            }
        }

        function updatePlayerViewState() {
            const view = document.getElementById('player-now-view');
            if (view) {
                if (isPlaying) {
                    view.classList.add('playing');
                } else {
                    view.classList.remove('playing');
                }
            }
        }

        // å¿«è¿›/å¿«é€€
        function seekRelative(seconds) {
            audio.currentTime = Math.max(0, Math.min(audio.duration || 0, audio.currentTime + seconds));
        }

        // ç‚¹å‡»è¿›åº¦æ¡è·³è½¬
        function seekToPosition(e) {
            const bar = e.currentTarget;
            const rect = bar.getBoundingClientRect();
            const percent = (e.clientX - rect.left) / rect.width;
            audio.currentTime = percent * (audio.duration || 0);
        }

        // è§¦æ‘¸è¿›åº¦æ¡å¤„ç†ï¼ˆç§»åŠ¨ç«¯ï¼‰
        let isTouchingProgress = false;
        function handleProgressTouchStart(e) {
            e.preventDefault();
            isTouchingProgress = true;
            const bar = document.getElementById('player-progress-bar');
            bar.classList.add('dragging');
            handleProgressTouchMove(e);
        }

        function handleProgressTouchMove(e) {
            if (!isTouchingProgress) return;
            e.preventDefault();
            const bar = document.getElementById('player-progress-bar');
            const rect = bar.getBoundingClientRect();
            const touch = e.touches[0];
            let percent = (touch.clientX - rect.left) / rect.width;
            percent = Math.max(0, Math.min(1, percent));

            // æ›´æ–°è¿›åº¦æ¡æ˜¾ç¤º
            const fill = document.getElementById('player-progress-fill');
            fill.style.width = (percent * 100) + '%';

            // æ›´æ–°æ—¶é—´æ˜¾ç¤º
            const time = percent * (audio.duration || 0);
            document.getElementById('player-current-time').textContent = formatTime(time);

            // æ˜¾ç¤ºæ—¶é—´æç¤º
            const tooltip = document.getElementById('player-time-tooltip');
            tooltip.textContent = formatTime(time);
            tooltip.style.left = (percent * 100) + '%';
        }

        function handleProgressTouchEnd(e) {
            if (!isTouchingProgress) return;
            isTouchingProgress = false;
            const bar = document.getElementById('player-progress-bar');
            bar.classList.remove('dragging');

            // è·³è½¬åˆ°å¯¹åº”ä½ç½®
            const rect = bar.getBoundingClientRect();
            const fill = document.getElementById('player-progress-fill');
            const percent = parseFloat(fill.style.width) / 100;
            audio.currentTime = percent * (audio.duration || 0);
        }

        // ä¸Šä¸€æ›²/ä¸‹ä¸€æ›²
        function playPrevTrack() {
            if (!currentTrack || !playerData) return;
            const currentIndex = playerData.tracks.findIndex(t => t.id === currentTrack.id);
            if (currentIndex > 0) {
                playTrack(playerData.tracks[currentIndex - 1].id);
            }
        }

        function playNextTrack() {
            if (!currentTrack || !playerData) return;
            const currentIndex = playerData.tracks.findIndex(t => t.id === currentTrack.id);
            if (currentIndex < playerData.tracks.length - 1) {
                playTrack(playerData.tracks[currentIndex + 1].id);
            }
        }

        // å­—å¹•æ›´æ–°
        function updatePlayerSubtitle(time) {
            if (!currentSubtitles.length) return;

            let foundIndex = -1;
            for (let i = 0; i < currentSubtitles.length; i++) {
                if (time >= currentSubtitles[i].start && time < currentSubtitles[i].end) {
                    foundIndex = i;
                    break;
                }
            }

            if (foundIndex !== currentSubtitleIndex) {
                currentSubtitleIndex = foundIndex;

                if (foundIndex >= 0) {
                    const sub = currentSubtitles[foundIndex];
                    showPlayerSubtitle(sub);

                    // æ·»åŠ åˆ°å†å²
                    if (!subtitleHistory.find(h => h.index === foundIndex)) {
                        subtitleHistory.push({ index: foundIndex, ...sub });
                    }
                } else {
                    clearPlayerSubtitle();
                }
            }
        }

        function showPlayerSubtitle(sub) {
            const speakerWrapper = document.getElementById('player-speaker-wrapper');
            const speakerEl = document.getElementById('player-speaker');
            const avatarEl = document.getElementById('player-speaker-avatar');
            const cnEl = document.getElementById('player-subtitle-cn');
            const jpEl = document.getElementById('player-subtitle-jp');

            if (!speakerEl || !cnEl || !jpEl) return;

            // ç”µå½±å­—å¹•é£æ ¼ï¼šç›´æ¥åˆ‡æ¢ï¼Œæ— å»¶è¿Ÿ
            if (sub.speaker) {
                speakerEl.textContent = sub.speaker;
                speakerEl.setAttribute('data-speaker', sub.speaker);

                // è®¾ç½®å¤´åƒ
                const avatarSrc = speakerAvatars[sub.speaker];
                if (avatarEl) {
                    if (avatarSrc) {
                        avatarEl.src = avatarSrc;
                        avatarEl.setAttribute('data-speaker', sub.speaker);
                        avatarEl.style.display = 'block';
                    } else {
                        avatarEl.style.display = 'none';
                    }
                }

                if (speakerWrapper) speakerWrapper.classList.add('visible');
            } else {
                if (speakerWrapper) speakerWrapper.classList.remove('visible');
            }

            cnEl.textContent = sub.cn;
            jpEl.textContent = sub.jp;
            cnEl.classList.add('visible');
            jpEl.classList.add('visible');
        }

        function clearPlayerSubtitle() {
            const speakerWrapper = document.getElementById('player-speaker-wrapper');
            const cnEl = document.getElementById('player-subtitle-cn');
            const jpEl = document.getElementById('player-subtitle-jp');

            if (speakerWrapper) speakerWrapper.classList.remove('visible');
            if (cnEl) cnEl.classList.remove('visible');
            if (jpEl) jpEl.classList.remove('visible');
        }

        // å›çœ‹å†å²
        function showPlayerHistory() {
            const panel = document.getElementById('player-history-panel');
            const list = document.getElementById('player-history-list');
            if (!panel || !list) return;

            // æ¸…ç©ºæœç´¢
            subtitleSearchQuery = '';
            const searchInput = document.getElementById('player-search-input');
            if (searchInput) searchInput.value = '';
            const searchWrapper = document.getElementById('player-search-wrapper');
            if (searchWrapper) searchWrapper.classList.remove('has-value');
            const resultsInfo = document.getElementById('player-search-results-info');
            if (resultsInfo) resultsInfo.textContent = '';

            renderSubtitleList();
            panel.classList.add('active');
        }

        function renderSubtitleList(searchQuery = '') {
            const list = document.getElementById('player-history-list');
            if (!list) return;

            // å†³å®šæ•°æ®æºï¼šæœç´¢æ—¶ç”¨å…¨éƒ¨å­—å¹•ï¼Œå¦åˆ™ç”¨å†å²
            let items = searchQuery ? currentSubtitles : subtitleHistory.slice().reverse();

            // æœç´¢è¿‡æ»¤
            if (searchQuery) {
                const query = searchQuery.toLowerCase();
                items = items.filter(item =>
                    item.cn.toLowerCase().includes(query) ||
                    item.jp.toLowerCase().includes(query)
                );
            }

            if (items.length === 0) {
                if (searchQuery) {
                    list.innerHTML = '<div class="player-history-empty">æ¤œç´¢çµæœãŒã‚ã‚Šã¾ã›ã‚“</div>';
                } else {
                    list.innerHTML = '<div class="player-history-empty">ã¾ã å†ç”Ÿå±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                }
            } else {
                list.innerHTML = items.map(item => {
                    let cn = item.cn;
                    let jp = item.jp;

                    // é«˜äº®æœç´¢è¯
                    if (searchQuery) {
                        const regex = new RegExp(`(${escapeRegex(searchQuery)})`, 'gi');
                        cn = cn.replace(regex, '<span class="player-history-highlight">$1</span>');
                        jp = jp.replace(regex, '<span class="player-history-highlight">$1</span>');
                    }

                    return `
                        <div class="player-history-item" onclick="jumpToSubtitle(${item.start})">
                            <div class="player-history-time">${formatTime(item.start)}</div>
                            ${item.speaker ? `<div class="player-history-speaker" data-speaker="${item.speaker}">${item.speaker}</div>` : ''}
                            <div class="player-history-cn">${cn}</div>
                            <div class="player-history-jp">${jp}</div>
                        </div>
                    `;
                }).join('');
            }

            // æ›´æ–°ç»“æœä¿¡æ¯
            const resultsInfo = document.getElementById('player-search-results-info');
            if (resultsInfo && searchQuery) {
                resultsInfo.textContent = `${items.length} ä»¶ã®çµæœ`;
            } else if (resultsInfo) {
                resultsInfo.textContent = '';
            }
        }

        function escapeRegex(str) {
            return str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        function searchSubtitles(query) {
            subtitleSearchQuery = query;
            const searchWrapper = document.getElementById('player-search-wrapper');
            if (searchWrapper) {
                searchWrapper.classList.toggle('has-value', query.length > 0);
            }
            renderSubtitleList(query);
        }

        function clearSubtitleSearch() {
            const searchInput = document.getElementById('player-search-input');
            if (searchInput) {
                searchInput.value = '';
                searchSubtitles('');
            }
        }

        function hidePlayerHistory() {
            const panel = document.getElementById('player-history-panel');
            if (panel) panel.classList.remove('active');
        }

        function jumpToSubtitle(time) {
            audio.currentTime = time;
            hidePlayerHistory();
            if (!isPlaying) togglePlayerPlay();
        }

        // æ’­æ”¾é€Ÿåº¦æ§åˆ¶
        function toggleSpeedMenu() {
            const menu = document.getElementById('player-speed-menu');
            if (menu) {
                menu.classList.toggle('active');
            }
        }

        function setPlaybackSpeed(speed) {
            currentPlaybackSpeed = speed;
            audio.playbackRate = speed;

            // æ›´æ–°æŒ‰é’®æ–‡å­—
            const btn = document.getElementById('player-speed-btn');
            if (btn) {
                btn.textContent = speed === 1 ? '1.0x' : speed + 'x';
                btn.classList.toggle('active', speed !== 1);
            }

            // æ›´æ–°èœå•é€‰ä¸­çŠ¶æ€
            const options = document.querySelectorAll('.player-speed-option');
            options.forEach(opt => {
                const optSpeed = parseFloat(opt.textContent);
                opt.classList.toggle('active', optSpeed === speed);
            });

            // å…³é—­èœå•
            const menu = document.getElementById('player-speed-menu');
            if (menu) menu.classList.remove('active');
        }

        // å­—å¹•æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢
        function toggleSubtitleMode() {
            const modes = ['both', 'cn', 'jp'];
            const labels = { 'both': 'åŒè¯­', 'cn': 'ä¸­æ–‡', 'jp': 'æ—¥æœ¬èª' };
            const currentIndex = modes.indexOf(subtitleMode);
            subtitleMode = modes[(currentIndex + 1) % modes.length];

            // æ›´æ–°æŒ‰é’®æ–‡å­—
            const btn = document.getElementById('player-subtitle-mode-btn');
            if (btn) {
                btn.textContent = labels[subtitleMode];
            }

            // æ›´æ–°å­—å¹•æ˜¾ç¤º
            updateSubtitleVisibility();
        }

        function updateSubtitleVisibility() {
            const cnEl = document.getElementById('player-subtitle-cn');
            const jpEl = document.getElementById('player-subtitle-jp');
            if (!cnEl || !jpEl) return;

            // æ ¹æ®æ¨¡å¼æ˜¾ç¤º/éšè—
            if (subtitleMode === 'both') {
                cnEl.style.display = '';
                jpEl.style.display = '';
            } else if (subtitleMode === 'cn') {
                cnEl.style.display = '';
                jpEl.style.display = 'none';
            } else if (subtitleMode === 'jp') {
                cnEl.style.display = 'none';
                jpEl.style.display = '';
            }
        }

        // è¿›åº¦æ¡æ—¶é—´é¢„è§ˆ
        function showTimeTooltip(event) {
            const bar = event.currentTarget;
            const tooltip = document.getElementById('player-time-tooltip');
            if (!tooltip || !audio.duration) return;

            const rect = bar.getBoundingClientRect();
            const percent = Math.max(0, Math.min(1, (event.clientX - rect.left) / rect.width));
            const time = percent * audio.duration;

            tooltip.textContent = formatTime(time);
            tooltip.style.left = (percent * 100) + '%';
        }

        function hideTimeTooltip() {
            // Tooltip hides via CSS when not hovering
        }

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­é€Ÿåº¦èœå•
        document.addEventListener('click', (e) => {
            const speedWrapper = document.querySelector('.player-speed-wrapper');
            const menu = document.getElementById('player-speed-menu');
            if (speedWrapper && menu && !speedWrapper.contains(e.target)) {
                menu.classList.remove('active');
            }
        });

        // è¿›åº¦ä¿å­˜
        function savePlayerProgress() {
            if (!currentTrack) return;
            try {
                let data = JSON.parse(localStorage.getItem(PLAYER_STORAGE_KEY) || '{}');
                data[currentTrack.id] = {
                    time: audio.currentTime,
                    savedAt: Date.now()
                };
                localStorage.setItem(PLAYER_STORAGE_KEY, JSON.stringify(data));
            } catch(e) {}
        }

        function getPlayerProgress(trackId) {
            try {
                const data = JSON.parse(localStorage.getItem(PLAYER_STORAGE_KEY) || '{}');
                return data[trackId] || null;
            } catch(e) {
                return null;
            }
        }

        function getAllPlayerProgress() {
            try {
                return JSON.parse(localStorage.getItem(PLAYER_STORAGE_KEY) || '{}');
            } catch(e) {
                return {};
            }
        }

        // éŸ³é¢‘äº‹ä»¶ç›‘å¬
        audio.addEventListener('timeupdate', () => {
            const currentTime = audio.currentTime;
            const duration = audio.duration || 0;

            // è¿›åº¦æ¡
            if (duration > 0) {
                const percent = (currentTime / duration) * 100;
                const fillEl = document.getElementById('player-progress-fill');
                if (fillEl) fillEl.style.width = percent + '%';
            }

            // æ—¶é—´æ˜¾ç¤º
            const currentTimeEl = document.getElementById('player-current-time');
            if (currentTimeEl) currentTimeEl.textContent = formatTime(currentTime);

            // å­—å¹•
            updatePlayerSubtitle(currentTime);

            // è¿·ä½ æ’­æ”¾å™¨è¿›åº¦
            updateMiniPlayerProgress();
        });

        // éŸ³é¢‘å…ƒæ•°æ®åŠ è½½åæ›´æ–°æ—¶é•¿ï¼ˆå¦‚æœæ¯” tracks.json æ›´å‡†ç¡®ï¼‰
        audio.addEventListener('loadedmetadata', () => {
            const totalTimeEl = document.getElementById('player-total-time');
            if (totalTimeEl && audio.duration && isFinite(audio.duration)) {
                totalTimeEl.textContent = formatTime(audio.duration);
            }
            console.log('[Audio] loadedmetadata - duration:', audio.duration);
        });

        // iOS Safari å¤‡ç”¨ï¼šdurationchange äº‹ä»¶
        audio.addEventListener('durationchange', () => {
            const totalTimeEl = document.getElementById('player-total-time');
            if (totalTimeEl && audio.duration && isFinite(audio.duration)) {
                totalTimeEl.textContent = formatTime(audio.duration);
            }
            console.log('[Audio] durationchange - duration:', audio.duration);
        });

        // canplay äº‹ä»¶ - éŸ³é¢‘å¯ä»¥å¼€å§‹æ’­æ”¾
        audio.addEventListener('canplay', () => {
            console.log('[Audio] canplay - ready to play');
        });

        // é”™è¯¯å¤„ç†
        audio.addEventListener('error', (e) => {
            console.error('[Audio] Error:', audio.error?.code, audio.error?.message);
        });

        audio.addEventListener('ended', () => {
            isPlaying = false;
            updatePlayerPlayButton();
            updatePlayerViewState();
            savePlayerProgress();
            // è‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€æ›²
            playNextTrack();
        });

        audio.addEventListener('play', () => {
            isPlaying = true;
            updatePlayerPlayButton();
            updatePlayerViewState();
            updateMiniPlayButton();
        });

        audio.addEventListener('pause', () => {
            isPlaying = false;
            updatePlayerPlayButton();
            updatePlayerViewState();
            updateMiniPlayButton();
        });

        // å®šæœŸä¿å­˜è¿›åº¦
        setInterval(savePlayerProgress, 5000);

        // ========================================
        // è¿·ä½ æ’­æ”¾å™¨
        // ========================================

        function updateMiniPlayerVisibility() {
            const mini = document.getElementById('player-mini');
            if (!mini) return;

            // æœ‰æ›²ç›®ä¸”ä¸åœ¨æ’­æ”¾å™¨appå†…æ—¶æ˜¾ç¤º
            if (currentTrack && currentApp !== 'player') {
                mini.classList.add('visible');
                updateMiniPlayerInfo();
            } else {
                mini.classList.remove('visible');
            }
        }

        function hideMiniPlayer() {
            const mini = document.getElementById('player-mini');
            if (mini) mini.classList.remove('visible');
        }

        function updateMiniPlayerInfo() {
            if (!currentTrack) return;

            const titleEl = document.getElementById('player-mini-title');
            const subtitleEl = document.getElementById('player-mini-subtitle');
            const coverEl = document.getElementById('player-mini-cover');

            if (titleEl) titleEl.textContent = currentTrack.title;
            if (subtitleEl) subtitleEl.textContent = currentTrack.titleZh;
            if (coverEl) coverEl.src = 'Graph/BK/BJ643496_img_main.webp';

            updateMiniPlayButton();
        }

        function updateMiniPlayerProgress() {
            if (!currentTrack || !audio.duration) return;

            const percent = (audio.currentTime / audio.duration) * 100;
            const fillEl = document.getElementById('player-mini-progress-fill');
            if (fillEl) fillEl.style.width = percent + '%';
        }

        function updateMiniPlayButton() {
            const icon = document.getElementById('player-mini-play-icon');
            if (!icon) return;
            if (isPlaying) {
                icon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
            } else {
                icon.innerHTML = '<path d="M8 5v14l11-7z"/>';
            }
        }

        function openMiniPlayer() {
            openApp('player');
            // ç¨åæ˜¾ç¤ºæ’­æ”¾è§†å›¾å¹¶æ›´æ–°ä¿¡æ¯
            setTimeout(() => {
                if (currentTrack) {
                    showPlayerView();
                    // æ›´æ–°æ’­æ”¾ç•Œé¢ä¿¡æ¯
                    const trackIndex = playerData.tracks.findIndex(t => t.id === currentTrack.id);
                    document.getElementById('player-track-num').textContent = `Track ${String(trackIndex + 1).padStart(2, '0')}`;
                    document.getElementById('player-track-title').textContent = currentTrack.title;
                    document.getElementById('player-total-time').textContent = formatTime(audio.duration);
                }
            }, 100);
        }

        function closeMiniPlayer(event) {
            event.stopPropagation();
            // åœæ­¢æ’­æ”¾å¹¶é‡ç½®
            audio.pause();
            audio.currentTime = 0;
            currentTrack = null;
            isPlaying = false;
            hideMiniPlayer();
        }

        function toggleMiniPlay(event) {
            event.stopPropagation(); // é˜»æ­¢å†’æ³¡åˆ°çˆ¶å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶
            togglePlayerPlay();
            updateMiniPlayButton();
        }

        // ========================================
        // æ—¥è¨˜ App
        // ========================================

        async function loadDiaryData() {
            try {
                const response = await fetch('data/diary.json');
                const data = await response.json();
                diaryData = data.entries || [];
                diaryDataLoaded = true;
                console.log('Diary data loaded:', diaryData.length, 'entries');
            } catch (e) {
                console.error('Failed to load diary data:', e);
                diaryData = [];
                diaryDataLoaded = false;
            }
        }

        function renderDiaryList() {
            diaryViewState = 'list';
            if (diaryData.length === 0) {
                return `<div class="app-placeholder">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/></svg>
                    <p>æ—¥è¨˜ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                </div>`;
            }

            let html = '<div class="diary-list">';
            diaryData.forEach((entry, index) => {
                // è·å–ç¬¬ä¸€æ®µä½œä¸ºé¢„è§ˆ
                const preview = entry.content[0]?.zh || '';
                html += `
                    <div class="diary-entry" data-diary-id="${entry.id}" onclick="openDiaryDetail(${entry.id})">
                        <div class="diary-number">ENTRY ${String(entry.id).padStart(2, '0')}</div>
                        <div class="diary-title">${entry.title}</div>
                        <div class="diary-preview">${preview}</div>
                    </div>
                `;
            });
            html += '</div>';
            return html;
        }

        function openDiaryDetail(id) {
            const entry = diaryData.find(d => d.id === id);
            if (!entry) return;

            diaryViewState = 'detail';

            let html = `
                <div class="diary-detail">
                    <button class="diary-back" onclick="backToDiaryList()">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                        ä¸€è¦§ã«æˆ»ã‚‹
                    </button>
                    <div class="diary-detail-header">
                        <div class="diary-detail-number">ENTRY ${String(entry.id).padStart(2, '0')}</div>
                        <div class="diary-detail-title">${entry.title}</div>
                    </div>
                    <div class="diary-content">
            `;

            entry.content.forEach(para => {
                html += `
                    <div class="diary-paragraph">
                        <div class="diary-ja">${para.ja}</div>
                        <div class="diary-zh">${para.zh}</div>
                    </div>
                `;
            });

            html += '</div></div>';
            appContent.innerHTML = html;
        }

        function backToDiaryList() {
            diaryViewState = 'list';
            appContent.innerHTML = renderDiaryList();
        }

        // ========================================
        // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ App
        // ========================================

        // æ—¥å†çŠ¶æ€ - å›ºå®šåœ¨2022å¹´11æœˆï¼ˆæ•…äº‹æ—¶é—´ï¼‰
        let calendarYear = 2022;
        let calendarMonth = 11; // 11æœˆ
        let selectedDate = 25; // é»˜è®¤é€‰ä¸­25æ—¥

        // æ—¥å†äº‹ä»¶æ•°æ® - æ¾æ±Ÿçš„æ—¥ç¨‹
        // æ³¨æ„ï¼šæ¾æ±Ÿå’Œå¥³ä¸»æ¯•ä¸šåæ²¡æœ‰è§é¢ï¼Œç›´åˆ°11æœˆ25æ—¥æ‰"é‡é€¢"
        // æ‰€æœ‰äº‹ä»¶ä½“ç°æ¾æ±Ÿåœ¨æš—ä¸­çš„ç›‘è§†ã€è®¡åˆ’å’Œæ—¥å¸¸è­¦å¯Ÿå·¥ä½œ
        const calendarEvents = {
            // 2022å¹´10æœˆ
            '2022-10': {
                1: [
                    { time: '10:00', title: 'é«˜æ©‹ã•ã‚“ã¨å·¡å›', type: 'work' }
                ],
                5: [
                    { time: '14:00', title: 'ä¸‰ä¸Šã¨æ¥è§¦', type: 'special', note: 'æ¬¡ã®æ®µå–ã‚Šã‚’ç¢ºèª' }
                ],
                10: [
                    { time: 'çµ‚æ—¥', title: 'å½¼å¥³ã®å¼•ã£è¶Šã—æ—¥', type: 'special', note: 'é ãã‹ã‚‰è¦‹å±Šã‘ãŸã€‚ã¤ã„ã«ã“ã®ç”ºã«' }
                ],
                12: [
                    { time: '18:30', title: 'å½¼å¥³ã®å¸°å®…ãƒ«ãƒ¼ãƒˆç¢ºèª', type: 'personal', note: 'å®‰å…¨ãªé“ã‚’æŠŠæ¡ã—ã¦ãŠã' }
                ],
                15: [
                    { time: '09:00', title: 'æ´¾å‡ºæ‰€å‹¤å‹™', type: 'work' },
                    { time: '18:00', title: 'å½¼å¥³ã®è·å ´å‘¨è¾ºã‚’å·¡å›', type: 'personal' }
                ],
                20: [
                    { time: '15:00', title: 'ä¸‰ä¸Šã¸ã®æŒ‡ç¤º', type: 'special', note: '11æœˆã®è¨ˆç”»ã«ã¤ã„ã¦' }
                ],
                25: [
                    { time: '10:00', title: 'é«˜æ©‹ã•ã‚“ã¨é˜²çŠ¯è¬›ç¿’', type: 'work' }
                ],
                28: [
                    { time: '19:00', title: 'å½¼å¥³ã®è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³è¨˜éŒ²', type: 'personal', note: 'å¸°å®…æ™‚é–“ã€ã‚ˆãè¡Œãåº—...' }
                ]
            },
            // 2022å¹´11æœˆ
            '2022-11': {
                1: [
                    { time: '09:00', title: 'æ´¾å‡ºæ‰€å‹¤å‹™', type: 'work' }
                ],
                3: [
                    { time: 'ç¥æ—¥', title: 'æ–‡åŒ–ã®æ—¥', type: 'personal', note: 'å½¼å¥³ã¯å®Ÿå®¶ã«å¸°çœï¼Ÿ' }
                ],
                5: [
                    { time: '14:00', title: 'é«˜æ©‹ã•ã‚“ã¨å•†åº—è¡—å·¡å›', type: 'work' },
                    { time: '20:00', title: 'ä¸‰ä¸Šã¨æœ€çµ‚ç¢ºèª', type: 'special', note: '25æ—¥ã®æ‰‹ç­ˆ' }
                ],
                8: [
                    { time: '18:00', title: 'å½¼å¥³ã®å¸°å®…ã‚’è¦‹å±Šã‘ã‚‹', type: 'personal', note: 'ä»Šæ—¥ã‚‚ç„¡äº‹' }
                ],
                10: [
                    { time: '10:00', title: 'ç½²ã§ã®ä¼šè­°', type: 'work' }
                ],
                12: [
                    { time: '15:00', title: 'é˜²çŠ¯ã‚«ãƒ¡ãƒ©ä½ç½®ã®ç¢ºèª', type: 'personal', note: '25æ—¥ã®ãƒ«ãƒ¼ãƒˆä¸Š' }
                ],
                15: [
                    { time: '09:00', title: 'æ´¾å‡ºæ‰€å‹¤å‹™', type: 'work' },
                    { time: '19:00', title: 'å½¼å¥³ã‚’é ãã‹ã‚‰', type: 'personal', note: 'å‹é”ã¨é£Ÿäº‹ã—ã¦ãŸã€‚æ¥½ã—ãã†ã ã£ãŸ' }
                ],
                18: [
                    { time: '14:00', title: 'é«˜æ©‹ã•ã‚“ã¨å­ä¾›ã®è¦‹å®ˆã‚Š', type: 'work' }
                ],
                20: [
                    { time: '10:00', title: 'æ´¾å‡ºæ‰€å‹¤å‹™', type: 'work' },
                    { time: '21:00', title: 'ä¸‰ä¸Šã«é€£çµ¡', type: 'special', note: 'æº–å‚™ã¯æ•´ã£ãŸ' }
                ],
                23: [
                    { time: 'ç¥æ—¥', title: 'å‹¤åŠ´æ„Ÿè¬ã®æ—¥', type: 'personal', note: 'å½¼å¥³ã¯ä¼‘ã¿ã€‚éƒ¨å±‹ã«ã„ã‚‹ã¿ãŸã„' }
                ],
                24: [
                    { time: 'çµ‚æ—¥', title: 'æœ€çµ‚æº–å‚™', type: 'special', note: 'æ˜æ—¥ã€ã™ã¹ã¦ãŒå§‹ã¾ã‚‹' }
                ],
                25: [
                    { time: '08:00', title: 'æœã®å·¡å›', type: 'work' },
                    { time: '19:30', title: 'é‹å‘½ã®å¤œ', type: 'special', note: 'å½¼å¥³ã‚’å®ˆã‚‹ã€‚ä½•ãŒã‚ã£ã¦ã‚‚ã€‚' }
                ],
                28: [
                    { time: '15:00', title: 'ç½²ã¸ã®å ±å‘Šæ›¸æå‡º', type: 'work', note: 'æš´æ¼¢æ’ƒé€€ã®ä»¶' }
                ],
                30: [
                    { time: '10:00', title: 'é«˜æ©‹ã•ã‚“ã¨å·¡å›', type: 'work' }
                ]
            },
            // 2022å¹´12æœˆ
            '2022-12': {
                1: [
                    { time: '09:00', title: 'æ´¾å‡ºæ‰€å‹¤å‹™', type: 'work' }
                ],
                3: [
                    { time: '18:00', title: 'å½¼å¥³ã®æ§˜å­ã‚’ç¢ºèª', type: 'personal', note: 'ã¾ã æ€¯ãˆã¦ã‚‹...' }
                ],
                5: [
                    { time: '14:00', title: 'é«˜æ©‹ã•ã‚“ã¨é˜²çŠ¯ãƒ‘ãƒˆãƒ­ãƒ¼ãƒ«', type: 'work' }
                ],
                10: [
                    { time: '10:00', title: 'ç½²ã§ã®è¡¨å½°å¼', type: 'work', note: 'å¸‚æ°‘ã‚’å®ˆã£ãŸåŠŸç¸¾ã§' }
                ]
            }
        };

        // æ—¥è¯­æ˜ŸæœŸ
        const weekdaysJP = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
        const weekdaysFullJP = ['æ—¥æ›œæ—¥', 'æœˆæ›œæ—¥', 'ç«æ›œæ—¥', 'æ°´æ›œæ—¥', 'æœ¨æ›œæ—¥', 'é‡‘æ›œæ—¥', 'åœŸæ›œæ—¥'];

        // è·å–æŸæœˆçš„å¤©æ•°
        function getDaysInMonth(year, month) {
            return new Date(year, month, 0).getDate();
        }

        // è·å–æŸæœˆç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå‡ 
        function getFirstDayOfMonth(year, month) {
            return new Date(year, month - 1, 1).getDay();
        }

        // è·å–æŸå¤©çš„äº‹ä»¶
        function getEventsForDate(year, month, day) {
            const key = `${year}-${month}`;
            return calendarEvents[key]?.[day] || [];
        }

        // æ£€æŸ¥æ˜¯å¦æœ‰äº‹ä»¶
        function hasEvents(year, month, day) {
            return getEventsForDate(year, month, day).length > 0;
        }

        // æ¸²æŸ“æ—¥å†
        function renderCalendar() {
            const daysInMonth = getDaysInMonth(calendarYear, calendarMonth);
            const firstDay = getFirstDayOfMonth(calendarYear, calendarMonth);
            const prevMonthDays = getDaysInMonth(calendarYear, calendarMonth - 1);

            // è®¡ç®—éœ€è¦æ˜¾ç¤ºçš„ä¸Šæœˆå¤©æ•°
            const prevDays = firstDay;
            // å›ºå®š42ä¸ªæ ¼å­ï¼ˆ6è¡ŒÃ—7åˆ—ï¼‰é¿å…å¸ƒå±€è·³åŠ¨
            const totalCells = 42;
            const nextDays = totalCells - prevDays - daysInMonth;

            let daysHtml = '';

            // ä¸Šä¸ªæœˆçš„æ—¥æœŸ
            for (let i = prevDays - 1; i >= 0; i--) {
                const day = prevMonthDays - i;
                const dayOfWeek = (firstDay - i - 1 + 7) % 7;
                const weekClass = dayOfWeek === 0 ? 'sunday' : (dayOfWeek === 6 ? 'saturday' : '');
                const hasEvent = hasEvents(calendarYear, calendarMonth - 1, day);
                daysHtml += `
                    <button class="calendar-day other-month ${weekClass} ${hasEvent ? 'has-event' : ''}"
                            data-year="${calendarYear}" data-month="${calendarMonth - 1}" data-day="${day}"
                            onclick="selectCalendarDate(${calendarYear}, ${calendarMonth - 1}, ${day})">
                        <span class="calendar-day-num">${day}</span>
                    </button>
                `;
            }

            // å½“å‰æœˆçš„æ—¥æœŸ
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(calendarYear, calendarMonth - 1, day);
                const dayOfWeek = date.getDay();
                const weekClass = dayOfWeek === 0 ? 'sunday' : (dayOfWeek === 6 ? 'saturday' : '');
                const isToday = calendarYear === 2022 && calendarMonth === 11 && day === 25;
                const isSelected = day === selectedDate;
                const hasEvent = hasEvents(calendarYear, calendarMonth, day);
                const isImportant = (calendarYear === 2022 && calendarMonth === 11 && day === 25) ||
                                    (calendarYear === 2022 && calendarMonth === 11 && day === 24) ||
                                    (calendarYear === 2022 && calendarMonth === 10 && day === 10);

                daysHtml += `
                    <button class="calendar-day ${weekClass} ${isToday ? 'today' : ''} ${isSelected ? 'selected' : ''} ${hasEvent ? 'has-event' : ''} ${isImportant ? 'important' : ''}"
                            data-year="${calendarYear}" data-month="${calendarMonth}" data-day="${day}"
                            onclick="selectCalendarDate(${calendarYear}, ${calendarMonth}, ${day})">
                        <span class="calendar-day-num">${day}</span>
                    </button>
                `;
            }

            // ä¸‹ä¸ªæœˆçš„æ—¥æœŸ
            for (let i = 1; i <= nextDays; i++) {
                const dayOfWeek = (firstDay + daysInMonth + i - 1) % 7;
                const weekClass = dayOfWeek === 0 ? 'sunday' : (dayOfWeek === 6 ? 'saturday' : '');
                const hasEvent = hasEvents(calendarYear, calendarMonth + 1, i);
                daysHtml += `
                    <button class="calendar-day other-month ${weekClass} ${hasEvent ? 'has-event' : ''}"
                            data-year="${calendarYear}" data-month="${calendarMonth + 1}" data-day="${i}"
                            onclick="selectCalendarDate(${calendarYear}, ${calendarMonth + 1}, ${i})">
                        <span class="calendar-day-num">${i}</span>
                    </button>
                `;
            }

            // æ¸²æŸ“é€‰ä¸­æ—¥æœŸçš„äº‹ä»¶
            const events = getEventsForDate(calendarYear, calendarMonth, selectedDate);
            const selectedDateObj = new Date(calendarYear, calendarMonth - 1, selectedDate);
            const weekdayFull = weekdaysFullJP[selectedDateObj.getDay()];

            let eventsHtml = '';
            if (events.length > 0) {
                eventsHtml = events.map(event => `
                    <div class="calendar-event-item ${event.type}">
                        <div class="calendar-event-time">${event.time}</div>
                        <div class="calendar-event-content">
                            <div class="calendar-event-title">${event.title}</div>
                            ${event.note ? `<div class="calendar-event-note">${event.note}</div>` : ''}
                        </div>
                    </div>
                `).join('');
            } else {
                eventsHtml = '<div class="calendar-no-events">äºˆå®šã¯ã‚ã‚Šã¾ã›ã‚“</div>';
            }

            return `
                <div class="calendar-app">
                    <div class="calendar-header">
                        <div class="calendar-title">
                            <div class="calendar-year">${calendarYear}å¹´</div>
                            <div class="calendar-month">${calendarMonth}æœˆ</div>
                        </div>
                        <div class="calendar-nav">
                            <button class="calendar-nav-btn" onclick="changeCalendarMonth(-1)">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                                </svg>
                            </button>
                            <button class="calendar-nav-btn" onclick="changeCalendarMonth(1)">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="calendar-weekdays">
                        ${weekdaysJP.map((day, i) => `
                            <div class="calendar-weekday ${i === 0 ? 'sunday' : ''} ${i === 6 ? 'saturday' : ''}">${day}</div>
                        `).join('')}
                    </div>
                    <div class="calendar-days">
                        ${daysHtml}
                    </div>
                    <div class="calendar-events">
                        <div class="calendar-events-header">
                            <span class="calendar-events-date">${calendarMonth}æœˆ${selectedDate}æ—¥</span>
                            <span class="calendar-events-weekday">${weekdayFull}</span>
                        </div>
                        ${eventsHtml}
                    </div>
                </div>
            `;
        }

        // åˆ‡æ¢æœˆä»½
        function changeCalendarMonth(delta) {
            calendarMonth += delta;
            if (calendarMonth > 12) {
                calendarMonth = 1;
                calendarYear++;
            } else if (calendarMonth < 1) {
                calendarMonth = 12;
                calendarYear--;
            }
            // é‡ç½®é€‰ä¸­æ—¥æœŸä¸º1å·
            selectedDate = 1;
            appContent.innerHTML = renderCalendar();
        }

        // é€‰æ‹©æ—¥æœŸ
        function selectCalendarDate(year, month, day) {
            // å¦‚æœç‚¹å‡»çš„æ˜¯å…¶ä»–æœˆä»½ï¼Œåˆ‡æ¢åˆ°é‚£ä¸ªæœˆ
            if (month !== calendarMonth || year !== calendarYear) {
                calendarYear = year;
                calendarMonth = month;
            }
            selectedDate = day;
            appContent.innerHTML = renderCalendar();
        }

        // ========================================
        // ãƒ¡ãƒ¢ App
        // ========================================

        // å¤‡å¿˜å½•çŠ¶æ€
        let memoViewState = 'list'; // 'list' æˆ– 'detail'
        let currentMemoId = null;

        // å¤‡å¿˜å½•æ•°æ®
        const memoData = [
            {
                id: 1,
                title: 'ã‚„ã‚‹ã“ã¨ãƒªã‚¹ãƒˆï¼ˆâ–ˆâ–ˆç”ºèµ´ä»»å‰ï¼‰',
                date: '2022.09.15',
                type: 'important',
                content: `
                    <ul>
                        <li class="checked">ç•°å‹•å±Šæå‡º</li>
                        <li class="checked">â–ˆâ–ˆç”ºã®åœ°å›³ã‚’é ­ã«å…¥ã‚Œã‚‹</li>
                        <li class="checked">ä½æ°‘ã®åå‰ã¨é¡”ã‚’è¦šãˆã‚‹</li>
                        <li class="checked">é«˜æ©‹ã•ã‚“ã«æŒ¨æ‹¶<span class="memo-highlight">ï¼ˆæŸ”é“é»’å¸¯ã€é¡”ãŒåºƒã„ã€å‘³æ–¹ã«ã¤ã‘ã‚‹ã¨æœ‰åˆ©ï¼‰</span></li>
                        <li class="unchecked">ä¸‰ä¸Šã«é€£çµ¡ã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’åˆã‚ã›ã‚‹</li>
                        <li class="unchecked">å½¼å¥³ã®å‡ºå‹¤åˆæ—¥ã‚’ç¢ºèª</li>
                    </ul>
                `
            },
            {
                id: 2,
                title: 'è»Ÿç¦æº–å‚™ãƒªã‚¹ãƒˆ',
                date: '2022.10.20',
                type: 'danger',
                content: `
                    <ul>
                        <li class="checked">å±±å¥¥ã®åˆ¥è˜å¥‘ç´„<span class="memo-highlight">ï¼ˆç¾é‡‘æ‰•ã„ã€å½åï¼‰</span></li>
                        <li class="checked">é˜²çŠ¯ã‚«ãƒ¡ãƒ©è¨­ç½®ï¼ˆç„é–¢ã€ãƒªãƒ“ãƒ³ã‚°ã€å»Šä¸‹ï¼‰</li>
                        <li class="checked">çª“ã®éµã‚’å¼·åŒ–ã€å¤–ã‹ã‚‰é–‹ã‹ãªã„ã‚ˆã†ã«</li>
                        <li class="checked">é£Ÿæ–™2é€±é–“åˆ†ç¢ºä¿</li>
                        <li class="checked">å½¼å¥³ã®æœãƒ»æ—¥ç”¨å“ã‚’äº‹å‰ã«è³¼å…¥</li>
                        <li class="checked">è»Šã®GPSé™¤å»ç¢ºèª</li>
                        <li class="checked">ã‚¹ãƒãƒ›æ²¡åç”¨ã®ç®±ã‚’ç”¨æ„</li>
                        <li class="unchecked">è¿‘éš£ä½æ°‘ãŒã„ãªã„ã‹æœ€çµ‚ç¢ºèª</li>
                        <li class="unchecked">å½¼å¥³ã®å¥½ããªã‚ªãƒ ãƒ©ã‚¤ã‚¹ã®ä½œã‚Šæ–¹ã‚’ç·´ç¿’</li>
                    </ul>
                `
            },
            {
                id: 3,
                title: 'ç¬‘é¡”ã®ç·´ç¿’ãƒã‚§ãƒƒã‚¯',
                date: '2022.08.01',
                type: 'normal',
                content: `
                    <ul>
                        <li class="unchecked">é¡ã®å‰ã§30åˆ†ç·´ç¿’ï¼ˆæ¯æœï¼‰</li>
                        <li class="unchecked">æ¼«ç”»ã®ä¸»äººå…¬ã®ç¬‘ã„æ–¹ã‚’ç ”ç©¶</li>
                        <li class="unchecked">ç›®ã‚‚ä¸€ç·’ã«ç¬‘ã†<span class="memo-warning">ï¼ˆå£ã ã‘ã ã¨æ€–ã„ï¼‰</span></li>
                        <li class="unchecked">ã€Œå¤§ä¸ˆå¤«ã ã‚ˆã€ã®ãƒˆãƒ¼ãƒ³ç·´ç¿’</li>
                        <li class="unchecked">ç·Šå¼µã™ã‚‹ã¨é¡”ãŒã“ã‚ã°ã‚‹â†’æ·±å‘¼å¸</li>
                    </ul>
                `
            },
            {
                id: 4,
                title: 'ä¸‰ä¸Šã¸ã®æŒ‡ç¤ºï¼ˆå‰Šé™¤äºˆå®šï¼‰',
                date: '2022.11.20',
                type: 'danger',
                content: `
                    <ul>
                        <li class="unchecked">å ´æ‰€ï¼šâ–ˆâ–ˆå…¬åœ’è£ã€è¡—ç¯ã®ãªã„é“</li>
                        <li class="unchecked">æ™‚é–“ï¼š20:30é ƒï¼ˆå½¼å¥³ã®é€€å‹¤æ™‚é–“ã«åˆã‚ã›ã‚‹ï¼‰</li>
                        <li class="unchecked"><span class="memo-warning">çµ¶å¯¾ã«é¡”ã‚’å‚·ã¤ã‘ã‚‹ãª</span></li>
                        <li class="unchecked">æ€–ãŒã‚‰ã›ã‚‹ã ã‘ã€ã‚„ã‚Šã™ãã‚‹ãª</li>
                        <li class="unchecked">ä¿ºãŒæ¥ãŸã‚‰ã™ãé€ƒã’ã‚</li>
                        <li class="unchecked"><span class="memo-warning">å¤±æ•—ã—ãŸã‚‰ã©ã†ãªã‚‹ã‹åˆ†ã‹ã£ã¦ã‚‹ãªï¼Ÿ</span></li>
                    </ul>
                `
            },
            {
                id: 5,
                title: 'å‡ºä¸–ãƒ«ãƒ¼ãƒˆç ”ç©¶',
                date: '2022.07.10',
                type: 'important',
                content: `
                    <p class="memo-section-title">å®Ÿç¸¾ã®ä½œã‚Šæ–¹</p>
                    <ul>
                        <li class="unchecked">ä¸‰ä¸Šã‚’ä½¿ã£ã¦ã€Œäº‹ä»¶ã€ã‚’ä½œã‚‹â†’è‡ªåˆ†ã§ã€Œè§£æ±ºã€</li>
                        <li class="unchecked">çŠ¯äººé€®æ•ï¼ˆä¸‰ä¸Šã«ä»²é–“ã‚’å£²ã‚‰ã›ã‚‹ï¼‰</li>
                        <li class="unchecked">ç«äº‹ã‹ã‚‰æ•‘å‡ºï¼ˆä¸‰ä¸Šã«æ”¾ç«ã•ã›ã‚‹ã€å°è¦æ¨¡ã§ï¼‰</li>
                        <li class="unchecked">åœ°åŸŸã®é˜²çŠ¯æ´»å‹•ã‚’ç©æ¥µçš„ã«ä¸»å°</li>
                    </ul>

                    <p class="memo-section-title">ä¿¡é ¼ã‚’å¾—ã‚‹æ–¹æ³•</p>
                    <ul>
                        <li class="unchecked">è€äººã®è©±ã‚’èãï¼ˆæš‡ã§ã‚‚å«Œãªé¡”ã‚’ã—ãªã„ï¼‰</li>
                        <li class="unchecked">å­ä¾›ã¨éŠã¶ï¼ˆè¦ªã®ä¿¡é ¼ã«ã¤ãªãŒã‚‹ï¼‰</li>
                        <li class="unchecked">åœ°åŸŸã‚¤ãƒ™ãƒ³ãƒˆã«å¿…ãšé¡”ã‚’å‡ºã™</li>
                        <li class="unchecked">å›°ã£ã¦ã„ã‚‹äººã‚’è¦‹ã¤ã‘ãŸã‚‰ç‡å…ˆã—ã¦åŠ©ã‘ã‚‹</li>
                    </ul>

                    <p class="memo-section-title">ä¸Šå¸ã¸ã®å°è±¡</p>
                    <ul>
                        <li class="unchecked">å ±å‘Šã¯è¿…é€Ÿãƒ»ç°¡æ½”ã«</li>
                        <li class="unchecked">æ‰‹æŸ„ã¯ä¸Šå¸ã«èŠ±ã‚’æŒãŸã›ã‚‹ï¼ˆæœ€åˆã ã‘ï¼‰</li>
                        <li class="unchecked">æ®‹æ¥­ã‚’æƒœã—ã¾ãªã„å§¿å‹¢ã‚’è¦‹ã›ã‚‹</li>
                    </ul>

                    <p class="memo-section-title">ãƒ¡ãƒ‡ã‚£ã‚¢éœ²å‡º</p>
                    <ul>
                        <li class="unchecked">åœ°æ–¹ç´™ã«å–ã‚Šä¸Šã’ã‚‰ã‚Œã‚‹ãƒãƒ£ãƒ³ã‚¹ã‚’ç‹™ã†</li>
                        <li class="unchecked">ã€Œè‹¥æ‰‹è­¦å®˜ã€ç«ç½ç¾å ´ã§å¹¼å…ã‚’æ•‘å‡ºã€â†<span class="memo-highlight">ç†æƒ³ã®è¦‹å‡ºã—</span></li>
                        <li class="unchecked">è¬™è™šãªã‚³ãƒ¡ãƒ³ãƒˆã‚’æº–å‚™ã—ã¦ãŠã</li>
                    </ul>

                    <p class="memo-section-title">æœ€çµ‚ç›®æ¨™</p>
                    <ul>
                        <li class="unchecked">ã€Œç”ºã®ãƒ’ãƒ¼ãƒ­ãƒ¼ã€ã¨ã—ã¦å½¼å¥³ã«èªçŸ¥ã•ã‚Œã‚‹</li>
                        <li class="unchecked">å½¼å¥³ã«ã¨ã£ã¦ã€Œé ¼ã‚Œã‚‹å­˜åœ¨ã€ã«ãªã‚‹</li>
                        <li class="unchecked"><span class="memo-highlight">å…¨ã¦ã¯å½¼å¥³ã®ãŸã‚</span></li>
                    </ul>
                `
            }
        ];

        // æ¸²æŸ“å¤‡å¿˜å½•åˆ—è¡¨
        function renderMemoList() {
            memoViewState = 'list';

            const listHtml = memoData.map(memo => {
                const typeClass = memo.type === 'danger' ? 'danger' :
                                  memo.type === 'important' ? 'important' : '';
                // æå–é¢„è§ˆæ–‡æœ¬
                const previewText = memo.content
                    .replace(/<[^>]*>/g, '')
                    .replace(/\s+/g, ' ')
                    .trim()
                    .substring(0, 60) + '...';

                return `
                    <div class="memo-card ${typeClass}" onclick="openMemo(${memo.id})">
                        <div class="memo-card-title">${memo.title}</div>
                        <div class="memo-card-preview">${previewText}</div>
                        <div class="memo-card-date">${memo.date}</div>
                    </div>
                `;
            }).join('');

            return `
                <div class="memo-app">
                    <div class="memo-list">
                        ${listHtml}
                    </div>
                </div>
            `;
        }

        // æ‰“å¼€å¤‡å¿˜å½•è¯¦æƒ…
        function openMemo(memoId) {
            const memo = memoData.find(m => m.id === memoId);
            if (!memo) return;

            memoViewState = 'detail';
            currentMemoId = memoId;

            appContent.innerHTML = `
                <div class="memo-app">
                    <div class="memo-detail">
                        <div class="memo-detail-header">
                            <div class="memo-detail-title">${memo.title}</div>
                            <div class="memo-detail-date">${memo.date}</div>
                        </div>
                        <div class="memo-detail-content">
                            ${memo.content}
                        </div>
                        <button class="memo-back-btn" onclick="backToMemoList()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                            </svg>
                            ãƒ¡ãƒ¢ä¸€è¦§ã«æˆ»ã‚‹
                        </button>
                    </div>
                </div>
            `;
        }

        // è¿”å›å¤‡å¿˜å½•åˆ—è¡¨
        function backToMemoList() {
            memoViewState = 'list';
            currentMemoId = null;
            appContent.innerHTML = renderMemoList();
        }

        // ========================================
        // ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ Appï¼ˆæ¤œç´¢å±¥æ­´ï¼‰
        // ========================================

        // æœç´¢å†å²æ•°æ® - æŒ‰æ—¥æœŸåˆ†ç»„
        // ç±»å‹: danger=å±é™©æœç´¢, obsession=å…³äºå¥³ä¸», manipulation=å¿ƒç†æ“çºµ, normal=æ™®é€š, map=åœ°å›¾
        // æ—¶é—´çº¿ï¼š9æœˆèµ´ä»»å‰ â†’ 10/10å¥³ä¸»æ¬æ¥ â†’ 11/25åˆé‡ â†’ 12æœˆäº¤å¾€ â†’ 1æœˆè´¥éœ²è½¯ç¦
        const browserHistoryData = [
            // æœ€æ–°ï¼ˆè½¯ç¦ä¸­ï¼‰- å•ç‹¬ä¸€æ¡
            {
                date: '2023å¹´01æœˆ18æ—¥',
                items: [
                    { query: 'è²¡ç”£ è´ˆä¸ æ‰‹ç¶šã æ‹äºº', url: 'google.com', time: '03:42', type: 'obsession' },
                ]
            },
            // 1æœˆåˆï¼ˆè½¯ç¦å¼€å§‹ï¼‰
            {
                date: '2023å¹´01æœˆ05æ—¥',
                items: [
                    { query: 'ç›£ç¦ç½ª é‡åˆ‘', url: 'google.com', time: '02:15', type: 'danger' },
                    { query: 'ã‚¹ãƒˆãƒƒã‚¯ãƒ›ãƒ«ãƒ ç—‡å€™ç¾¤', url: 'wikipedia.org', time: '01:47', type: 'danger' },
                    { query: 'å½¼å¥³ãŒè‡ªåˆ†ã ã‘ã‚’è¦‹ã¦ãã‚Œã‚‹æ–¹æ³•', url: 'google.com', time: '01:23', type: 'obsession' },
                ]
            },
            // 12æœˆï¼ˆäº¤å¾€æœŸé—´ï¼‰
            {
                date: '2022å¹´12æœˆ15æ—¥',
                items: [
                    { query: 'ãŠã¯ã‚ˆã†LINE æ¯æ—¥ é‡ã„ï¼Ÿ', url: 'google.com', time: '07:12', type: 'normal' },
                    { query: 'ç›¸æ‰‹ã«å¥½ãã«ãªã£ã¦ã‚‚ã‚‰ã†æ–¹æ³•', url: 'google.com', time: '00:33', type: 'obsession' },
                ]
            },
            {
                date: '2022å¹´12æœˆ03æ—¥',
                items: [
                    { query: 'å¥½ããªäºº åˆã‚³ãƒ³ é˜»æ­¢', url: 'google.com', time: '23:08', type: 'obsession' },
                ]
            },
            // 11æœˆ24æ—¥ï¼ˆè¥²æ’ƒäº‹ä»¶ã®æœ€çµ‚ç¢ºèªï¼‰
            {
                date: '2022å¹´11æœˆ24æ—¥',
                items: [
                    { query: 'Google ãƒãƒƒãƒ—ï¼šâ–ˆâ–ˆå…¬åœ’', url: 'maps.google.com', time: '22:30', type: 'map' },
                ]
            },
            // 11æœˆ20æ—¥ï¼ˆè¥²æ’ƒè¨ˆç”»ï¼‰
            {
                date: '2022å¹´11æœˆ20æ—¥',
                items: [
                    { query: 'å¥³æ€§ è¥²ã‚ã‚ŒãŸæ™‚ å¿ƒç†', url: 'google.com', time: '19:45', type: 'manipulation' },
                    { query: 'ãƒˆãƒ©ã‚¦ãƒ å…‹æœ æ‰‹ä¼ã† ä¿¡é ¼é–¢ä¿‚', url: 'google.com', time: '19:23', type: 'manipulation' },
                ]
            },
            // 10æœˆ20æ—¥ï¼ˆå¥³ä¸»æ¬æ¥åã€ç›£è¦–ï¼‰
            {
                date: '2022å¹´10æœˆ20æ—¥',
                items: [
                    { query: 'äººã®å®¶ å…¥ã‚‹ ãƒãƒ¬ãªã„', url: 'google.com', time: '02:34', type: 'danger', deleted: true },
                    { query: 'Google ãƒãƒƒãƒ—ï¼šâ–ˆâ–ˆä¸­å­¦æ ¡', url: 'maps.google.com', time: '01:12', type: 'map' },
                ]
            },
            // 10æœˆåˆï¼ˆä¸‰ä¸Šã‚’åˆ©ç”¨ï¼‰
            {
                date: '2022å¹´10æœˆ05æ—¥',
                items: [
                    { query: 'å‰ç§‘è€… å¼±ã¿ æ¡ã‚‹', url: 'google.com', time: '23:55', type: 'danger' },
                ]
            },
            // 9æœˆï¼ˆèµ´ä»»å‰ï¼‰
            {
                date: '2022å¹´09æœˆ25æ—¥',
                items: [
                    { query: 'å¥½ããªäºº èª¿ã¹ã‚‹ ã©ã“ã¾ã§OK', url: 'google.com', time: '23:41', type: 'obsession' },
                    { query: 'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆï¼ˆæ¼«ç”»ï¼‰ ä¸»äººå…¬ é«ªå‹', url: 'google.com', time: '20:15', type: 'normal' },
                    { query: 'æ•´å½¢ ç”· ãƒ“ãƒ•ã‚©ãƒ¼ã‚¢ãƒ•ã‚¿ãƒ¼', url: 'google.com', time: '19:58', type: 'normal' },
                ]
            },
        ];

        // æ¸²æŸ“æµè§ˆå™¨æœç´¢å†å²
        function renderBrowser() {
            const searchIcon = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="M21 21l-4.35-4.35"/>
            </svg>`;

            const mapIcon = `<svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>`;

            let historyHtml = browserHistoryData.map(group => {
                const itemsHtml = group.items.map(item => {
                    const typeClass = item.type || 'normal';
                    const deletedClass = item.deleted ? 'deleted' : '';
                    const icon = item.type === 'map' ? mapIcon : searchIcon;
                    const deletedBadge = item.deleted ? '<span class="browser-deleted-badge">å‰Šé™¤æ¸ˆã¿</span>' : '';

                    return `
                        <div class="browser-history-item ${typeClass} ${deletedClass}">
                            <div class="browser-history-icon">${icon}</div>
                            <div class="browser-history-content">
                                <div class="browser-history-query">${item.query}</div>
                                <div class="browser-history-url">${item.url}</div>
                            </div>
                            <div class="browser-history-time">${item.time}</div>
                            ${deletedBadge}
                        </div>
                    `;
                }).join('');

                return `
                    <div class="browser-history-group">
                        <div class="browser-history-date">${group.date}</div>
                        ${itemsHtml}
                    </div>
                `;
            }).join('');

            return `
                <div class="browser-app">
                    <div class="browser-search-bar">
                        <div class="browser-search-input">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"/>
                                <path d="M21 21l-4.35-4.35"/>
                            </svg>
                            <span class="browser-search-text">æ¤œç´¢ã¾ãŸã¯URLã‚’å…¥åŠ›</span>
                        </div>
                    </div>
                    <div class="browser-history-section">
                        <div class="browser-history-title">
                            <span>æ¤œç´¢å±¥æ­´</span>
                        </div>
                    </div>
                    <div class="browser-history-list">
                        ${historyHtml}
                    </div>
                </div>
            `;
        }

        // ========================================
        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ Appï¼ˆæ—¥å¼SNSé£æ ¼ï¼‰
        // ========================================

        let messageViewState = 'list'; // 'list' or 'chat'
        let currentChatId = null;

        // èŠå¤©åˆ—è¡¨æ•°æ®
        const chatListData = [
            {
                id: 'private_user',
                name: 'â–ˆâ–ˆâ–ˆ',
                type: 'private',
                avatar: 'ğŸ‘©',
                preview: '',
                time: '',
                unread: 0,
                pinned: true,
                draft: 'æ„›ã—ã¦ã‚‹ã€ãšã£ã¨'
            },
            {
                id: 'group_patrol',
                name: 'â–ˆâ–ˆç”ºãƒ‘ãƒˆãƒ­ãƒ¼ãƒ«éšŠ',
                type: 'group',
                avatar: 'ğŸ‘®',
                members: ['é«˜æ©‹', 'æ¾æ±Ÿ', 'ã‚ãªãŸ'],
                preview: 'é«˜æ©‹ï¼šæ°—ã‚’ã¤ã‘ã¦å¸°ã£ã¦ã­ã€œ',
                time: '20:15',
                unread: 3
            },
            {
                id: 'private_mikami',
                name: 'ä¸‰ä¸Š',
                type: 'private',
                avatar: 'ğŸ‘¤',
                preview: 'æ—¢èª­ç„¡è¦–ã™ã‚“ãªã€‚è¿”äº‹ã—ã‚',
                time: '01/04',
                unread: 0
            },
            // è£…é¥°æ€§èŠå¤©ï¼ˆä¸å¯æ‰“å¼€ï¼‰
            {
                id: 'disabled_koban',
                name: 'â–ˆâ–ˆäº¤ç•ª',
                type: 'group',
                avatar: 'ğŸ¢',
                preview: 'ç”°ä¸­ï¼šæ˜æ—¥ã®ã‚·ãƒ•ãƒˆç¢ºèªã‚ˆã‚ã—ã',
                time: '01/03',
                unread: 0,
                disabled: true
            },
            {
                id: 'disabled_senpai',
                name: 'ä½è—¤å…ˆè¼©',
                type: 'private',
                avatar: 'ğŸ‘®â€â™‚ï¸',
                preview: 'é£²ã¿ä¼šã©ã†ã™ã‚‹ï¼Ÿ',
                time: '12/28',
                unread: 0,
                disabled: true
            },
            {
                id: 'disabled_neighbor',
                name: 'éš£ã®å±±ç”°ã•ã‚“',
                type: 'private',
                avatar: 'ğŸ‘´',
                preview: 'ã„ã¤ã‚‚ã‚ã‚ŠãŒã¨ã†ã­',
                time: '12/20',
                unread: 0,
                disabled: true
            },
            {
                id: 'disabled_gym',
                name: 'ã‚¸ãƒ å—ä»˜',
                type: 'private',
                avatar: 'ğŸ‹ï¸',
                preview: 'ä¼šå“¡æ›´æ–°ã®ãŠçŸ¥ã‚‰ã›',
                time: '12/15',
                unread: 0,
                disabled: true
            },
            {
                id: 'private_villa',
                name: 'æ¡ç”Ÿã•ã‚“',
                type: 'private',
                avatar: 'ğŸ©',
                preview: 'æœ¬å½“ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ',
                time: '09/01',
                unread: 0
            }
        ];

        // èŠå¤©æ¶ˆæ¯æ•°æ®
        const chatMessagesData = {
            'group_patrol': {
                name: 'â–ˆâ–ˆç”ºãƒ‘ãƒˆãƒ­ãƒ¼ãƒ«éšŠ',
                type: 'group',
                members: ['é«˜æ©‹', 'æ¾æ±Ÿ', 'ã‚ãªãŸ'],
                messages: [
                    { date: '11æœˆ25æ—¥ï¼ˆé‡‘ï¼‰' },
                    {
                        sender: 'takahashi',
                        name: 'é«˜æ©‹',
                        text: 'ãŠå¬¢ã¡ã‚ƒã‚“ã€ä»Šæ—¥ã¯å¤§å¤‰ã ã£ãŸãªâ€¦ğŸ˜¢',
                        translation: 'ï¼ˆå§‘å¨˜ï¼Œä»Šå¤©çœŸæ˜¯è¾›è‹¦ä½ äº†â€¦ï¼‰',
                        time: '21:32'
                    },
                    {
                        sender: 'takahashi',
                        name: 'é«˜æ©‹',
                        text: 'æ€ªæˆ‘ã¨ã‹ã—ã¦ãªã„ã‹ï¼Ÿä½•ã‹ã‚ã£ãŸã‚‰ã™ãè¨€ã£ã¦ãã‚Œã‚ˆãª',
                        translation: 'ï¼ˆæœ‰æ²¡æœ‰å—ä¼¤ï¼Ÿæœ‰ä»€ä¹ˆäº‹é©¬ä¸Šè·Ÿæˆ‘è¯´å•Šï¼‰',
                        time: '21:32'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'å¤§ä¸ˆå¤«ã§ã™ã‹ï¼Ÿæ€–ã‹ã£ãŸã§ã™ã‚ˆã­â€¦',
                        translation: 'ï¼ˆä½ è¿˜å¥½å—ï¼Ÿå¾ˆå®³æ€•å§â€¦ï¼‰',
                        time: '21:33',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä¿ºã€ã—ã°ã‚‰ãä»˜è¿‘ã®å·¡å›å¼·åŒ–ã—ã¾ã™ã‚“ã§ã€å®‰å¿ƒã—ã¦ãã ã•ã„ (*Â´â–½`*)',
                        translation: 'ï¼ˆæˆ‘ä¼šåŠ å¼ºé™„è¿‘çš„å·¡é€»ï¼Œè¯·æ”¾å¿ƒï¼‰',
                        time: '21:33',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'ã‚ãªãŸ',
                        text: 'ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™â€¦æœ¬å½“ã«æ€–ã‹ã£ãŸã§ã™ğŸ’¦',
                        translation: 'ï¼ˆè°¢è°¢ä½ ä»¬â€¦çœŸçš„å¾ˆå®³æ€•ï¼‰',
                        time: '21:35'
                    },
                    {
                        sender: 'user',
                        name: 'ã‚ãªãŸ',
                        text: 'æ¾æ±Ÿã•ã‚“ãŒæ¥ã¦ãã‚Œãªã‹ã£ãŸã‚‰â€¦',
                        translation: 'ï¼ˆå¦‚æœæ¾æ±Ÿå…ˆç”Ÿæ²¡æœ‰æ¥çš„è¯â€¦ï¼‰',
                        time: '21:35'
                    },
                    {
                        sender: 'takahashi',
                        name: 'é«˜æ©‹',
                        text: 'ãƒãƒƒãƒ„ãƒ³ãŒã„ã¦ãã‚Œã¦æœ¬å½“ã«è‰¯ã‹ã£ãŸã‚ˆï¼ã“ã®ç”ºã®èª‡ã‚Šã ãªÙ©(à¹‘â›á´—â›à¹‘)Û¶',
                        translation: 'ï¼ˆæœ‰å°æ¾åœ¨çœŸæ˜¯å¤ªå¥½äº†ï¼çœŸæ˜¯è¿™ä¸ªé•‡çš„éª„å‚²å•Šï¼‰',
                        time: '21:36'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã„ãˆã„ãˆã€å½“ç„¶ã®ã“ã¨ã‚’ã—ãŸã¾ã§ã§ã™',
                        translation: 'ï¼ˆå“ªé‡Œå“ªé‡Œï¼Œåªæ˜¯åšäº†åº”è¯¥åšçš„äº‹ï¼‰',
                        time: '21:36',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'å›°ã£ã¦ã„ã‚‹äººã‚’åŠ©ã‘ã‚‹ã®ãŒè­¦å¯Ÿã®ä»•äº‹ã§ã™ã‹ã‚‰ (ï½€ãƒ»Ï‰ãƒ»Â´)',
                        translation: 'ï¼ˆå¸®åŠ©æœ‰å›°éš¾çš„äººæ˜¯è­¦å¯Ÿçš„èŒè´£ï¼‰',
                        time: '21:37',
                        self: true
                    },
                    {
                        sender: 'takahashi',
                        name: 'é«˜æ©‹',
                        text: 'ãŠå¬¢ã¡ã‚ƒã‚“ã€æ˜æ—¥ã‹ã‚‰æ°—ã‚’ã¤ã‘ã¦å¸°ã‚‹ã‚“ã ãã€‚æš—ããªã‚‹å‰ã«ãª',
                        translation: 'ï¼ˆå§‘å¨˜ï¼Œä»æ˜å¤©å¼€å§‹å›å®¶è¦å°å¿ƒå•Šã€‚å¤©é»‘ä¹‹å‰å›æ¥ï¼‰',
                        time: '21:38'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã‚ã®â€¦ã‚ˆã‹ã£ãŸã‚‰ã€ã—ã°ã‚‰ãã®é–“ã€é€€å‹¤æ™‚é–“ã«åˆã‚ã›ã¦å·¡å›ã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿ',
                        translation: 'ï¼ˆé‚£ä¸ªâ€¦å¦‚æœå¯ä»¥çš„è¯ï¼Œè¿™æ®µæ—¶é—´æˆ‘é…åˆä½ çš„ä¸‹ç­æ—¶é—´å·¡é€»å§ï¼Ÿï¼‰',
                        time: '21:39',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'çŠ¯äººãŒã¾ã æ•ã¾ã£ã¦ãªã„ã®ã§â€¦ã¡ã‚‡ã£ã¨å¿ƒé…ã§ğŸ’¦',
                        translation: 'ï¼ˆå› ä¸ºçŠ¯äººè¿˜æ²¡æŠ“åˆ°â€¦æœ‰ç‚¹æ‹…å¿ƒï¼‰',
                        time: '21:39',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'ã‚ãªãŸ',
                        text: 'ãˆã£ã€ãã“ã¾ã§ã—ã¦ã„ãŸã ã‘ã‚‹ã‚“ã§ã™ã‹â€¦ï¼Ÿ',
                        translation: 'ï¼ˆè¯¶ï¼Œå¯ä»¥å¸®æˆ‘åšåˆ°è¿™ç§ç¨‹åº¦å—â€¦ï¼Ÿï¼‰',
                        time: '21:40'
                    },
                    {
                        sender: 'user',
                        name: 'ã‚ãªãŸ',
                        text: 'ã”è¿·æƒ‘ã˜ã‚ƒãªã„ã§ã™ã‹ï¼Ÿ',
                        translation: 'ï¼ˆä¸ä¼šç»™æ‚¨æ·»éº»çƒ¦å—ï¼Ÿï¼‰',
                        time: '21:40'
                    },
                    {
                        sender: 'takahashi',
                        name: 'é«˜æ©‹',
                        text: 'è¿·æƒ‘ãªã‚ã‘ãªã„ã ã‚ï¼ãƒãƒƒãƒ„ãƒ³ã€é ¼ã‚“ã ãğŸ‘',
                        translation: 'ï¼ˆæ€ä¹ˆä¼šæ·»éº»çƒ¦ï¼å°æ¾ï¼Œæ‹œæ‰˜ä½ äº†ï¼‰',
                        time: '21:41'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä»»ã›ã¦ãã ã•ã„ï¼çµ¶å¯¾ã«å®ˆã‚Šã¾ã™ã‹ã‚‰ á•¦(Ã²_Ã³Ë‡)á•¤',
                        translation: 'ï¼ˆäº¤ç»™æˆ‘å§ï¼æˆ‘ä¸€å®šä¼šä¿æŠ¤ä½ çš„ï¼‰',
                        time: '21:41',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'ã‚ãªãŸ',
                        text: 'ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™â€¦æ¾æ±Ÿã•ã‚“ã€é«˜æ©‹ã•ã‚“ (Â´ï¼›Ï‰ï¼›`)',
                        translation: 'ï¼ˆè°¢è°¢ä½ ä»¬â€¦æ¾æ±Ÿå…ˆç”Ÿã€é«˜æ¡¥å…ˆç”Ÿï¼‰',
                        time: '21:42'
                    },
                    {
                        sender: 'user',
                        name: 'ã‚ãªãŸ',
                        text: 'æœ¬å½“ã«å¿ƒå¼·ã„ã§ã™',
                        translation: 'ï¼ˆçœŸçš„å¾ˆå®‰å¿ƒï¼‰',
                        time: '21:42'
                    },
                    {
                        sender: 'takahashi',
                        name: 'é«˜æ©‹',
                        text: 'ã‚ˆã—ã€ã˜ã‚ƒã‚ä»Šæ—¥ã¯ã‚†ã£ãã‚Šä¼‘ã¿ãªã€‚ãŠã‚„ã™ã¿ã€œğŸŒ™',
                        translation: 'ï¼ˆå¥½ï¼Œé‚£ä»Šå¤©å¥½å¥½ä¼‘æ¯å§ã€‚æ™šå®‰ã€œï¼‰',
                        time: '21:43'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ãŠã‚„ã™ã¿ãªã•ã„ã€‚ä½•ã‹ã‚ã£ãŸã‚‰ã„ã¤ã§ã‚‚é€£çµ¡ãã ã•ã„',
                        translation: 'ï¼ˆæ™šå®‰ã€‚æœ‰ä»€ä¹ˆäº‹éšæ—¶è”ç³»æˆ‘ï¼‰',
                        time: '21:43',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'æ˜æ—¥ã€ãŠä»•äº‹çµ‚ã‚ã‚Šã«è¿ãˆã«è¡Œãã¾ã™ã­ (*^^*)',
                        translation: 'ï¼ˆæ˜å¤©ä¸‹ç­æˆ‘å»æ¥ä½ ï¼‰',
                        time: '21:44',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'ã‚ãªãŸ',
                        text: 'ã¯ã„ã€ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ğŸ™‡â€â™€ï¸',
                        translation: 'ï¼ˆå¥½çš„ï¼Œæ‹œæ‰˜æ‚¨äº†ï¼‰',
                        time: '21:45'
                    },
                    { date: '11æœˆ26æ—¥ï¼ˆåœŸï¼‰' },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼ä»Šæ—¥ã‚‚ä¸€æ—¥é ‘å¼µã‚Šã¾ã—ã‚‡ã†â˜€ï¸',
                        translation: 'ï¼ˆæ—©ä¸Šå¥½ï¼ä»Šå¤©ä¹ŸåŠ æ²¹å§ï¼‰',
                        time: '07:30',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'æ˜¨æ—¥ã¯ã¡ã‚ƒã‚“ã¨çœ ã‚Œã¾ã—ãŸã‹ï¼Ÿ',
                        translation: 'ï¼ˆæ˜¨å¤©ç¡å¾—å¥½å—ï¼Ÿï¼‰',
                        time: '07:30',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'ã‚ãªãŸ',
                        text: 'ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼å°‘ã—å¤¢è¦‹ãŒæ‚ªã‹ã£ãŸã§ã™ã‘ã©ã€å¤§ä¸ˆå¤«ã§ã™',
                        translation: 'ï¼ˆæ—©ä¸Šå¥½ï¼åšäº†ç‚¹å™©æ¢¦ï¼Œä½†æ²¡äº‹çš„ï¼‰',
                        time: '07:45'
                    },
                    {
                        sender: 'takahashi',
                        name: 'é«˜æ©‹',
                        text: 'ãŠã¯ã‚ˆã†ã€œï¼ç„¡ç†ã™ã‚“ãªã‚ˆã€œ',
                        translation: 'ï¼ˆæ—©ä¸Šå¥½ã€œï¼åˆ«å‹‰å¼ºè‡ªå·±å•Šã€œï¼‰',
                        time: '08:02'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'å¤¢è¦‹æ‚ªã‹ã£ãŸã‚“ã§ã™ã­â€¦(Â´ãƒ»Ï‰ãƒ»`)',
                        translation: 'ï¼ˆåšå™©æ¢¦äº†å•Šâ€¦ï¼‰',
                        time: '08:15',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä»Šæ—¥ã®ãŠæ˜¼ã€å·¡å›ã®ã¤ã„ã§ã«ä½•ã‹å·®ã—å…¥ã‚ŒæŒã£ã¦ã„ãã¾ã—ã‚‡ã†ã‹ï¼Ÿ',
                        translation: 'ï¼ˆä»Šå¤©ä¸­åˆå·¡é€»é¡ºä¾¿ç»™ä½ å¸¦ç‚¹åƒçš„å§ï¼Ÿï¼‰',
                        time: '08:15',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ç”˜ã„ã‚‚ã®é£Ÿã¹ã‚‹ã¨å…ƒæ°—å‡ºã¾ã™ã‚ˆâœ¨',
                        translation: 'ï¼ˆåƒç”œçš„ä¸œè¥¿ä¼šç²¾ç¥èµ·æ¥çš„ï¼‰',
                        time: '08:16',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'ã‚ãªãŸ',
                        text: 'ãˆã£ã€ã„ã„ã‚“ã§ã™ã‹â€¦ï¼ŸğŸ¥º',
                        translation: 'ï¼ˆè¯¶ï¼Œå¯ä»¥å—â€¦ï¼Ÿï¼‰',
                        time: '08:20'
                    },
                    {
                        sender: 'takahashi',
                        name: 'é«˜æ©‹',
                        text: 'ãƒãƒƒãƒ„ãƒ³å„ªã—ã„ãªã€œğŸ˜Š ä¿ºã‚‚ä½•ã‹æŒã£ã¦ãã‚ï¼',
                        translation: 'ï¼ˆå°æ¾çœŸæ¸©æŸ”å•Šã€œ æˆ‘ä¹Ÿå¸¦ç‚¹ä¸œè¥¿å»ï¼ï¼‰',
                        time: '08:22'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'é«˜æ©‹ã•ã‚“ã¾ã§ï¼ç¬‘',
                        translation: 'ï¼ˆè¿é«˜æ¡¥å…ˆç”Ÿä¹Ÿï¼ç¬‘ï¼‰',
                        time: '08:23',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã˜ã‚ƒã‚ã€ãŠæ˜¼é ƒã«å¯„ã‚Šã¾ã™ã­ã€‚å¾…ã£ã¦ã¦ãã ã•ã„ (*Â´Ï‰`*)',
                        translation: 'ï¼ˆé‚£ä¸­åˆå·¦å³è¿‡å»å“¦ã€‚ç­‰ç€æˆ‘ï¼‰',
                        time: '08:24',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'ã‚ãªãŸ',
                        text: 'ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™â€¦ï¼ãŠäºŒäººã¨ã‚‚å„ªã—ã™ãã¾ã™ğŸ˜­',
                        translation: 'ï¼ˆè°¢è°¢ä½ ä»¬â€¦ï¼ä¸¤ä½éƒ½å¤ªæ¸©æŸ”äº†ï¼‰',
                        time: '08:25'
                    },
                    {
                        sender: 'takahashi',
                        name: 'é«˜æ©‹',
                        text: 'å›°ã£ãŸæ™‚ã¯ãŠäº’ã„æ§˜ã ï¼æ°—ã‚’ã¤ã‘ã¦å¸°ã£ã¦ã­ã€œ',
                        translation: 'ï¼ˆæœ‰å›°éš¾çš„æ—¶å€™è¦äº’ç›¸å¸®åŠ©ï¼å°å¿ƒå›å®¶å“¦ã€œï¼‰',
                        time: '20:15'
                    }
                ]
            },
            // å’Œå¥³ä¸»çš„ç§èŠ
            'private_user': {
                name: 'â–ˆâ–ˆâ–ˆ',
                type: 'private',
                messages: [
                    { date: '11æœˆ25æ—¥ï¼ˆé‡‘ï¼‰' },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä»Šæ—¥ã¯æœ¬å½“ã«æ€–ã‹ã£ãŸã§ã™ã‚ˆã­ã€‚å¤§ä¸ˆå¤«ã§ã™ã‹ï¼Ÿ',
                        translation: 'ï¼ˆä»Šå¤©çœŸçš„å¾ˆå®³æ€•å§ã€‚ä½ è¿˜å¥½å—ï¼Ÿï¼‰',
                        time: '22:15',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä½•ã‹ã‚ã£ãŸã‚‰ã„ã¤ã§ã‚‚é€£çµ¡ãã ã•ã„ã€‚ä¿ºã€å¿…ãšé§†ã‘ã¤ã‘ã¾ã™ã‹ã‚‰',
                        translation: 'ï¼ˆæœ‰ä»€ä¹ˆäº‹éšæ—¶è”ç³»æˆ‘ã€‚æˆ‘ä¸€å®šä¼šèµ¶è¿‡å»çš„ï¼‰',
                        time: '22:15',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'â–ˆâ–ˆâ–ˆ',
                        text: 'ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™â€¦',
                        translation: 'ï¼ˆè°¢è°¢æ‚¨â€¦ï¼‰',
                        time: '22:20'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ç„¡ç†ã—ãªã„ã§ãã ã•ã„ã­ã€‚ãŠã‚„ã™ã¿ãªã•ã„ğŸŒ™',
                        translation: 'ï¼ˆä¸è¦å‹‰å¼ºè‡ªå·±å“¦ã€‚æ™šå®‰ï¼‰',
                        time: '22:21',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'â–ˆâ–ˆâ–ˆ',
                        text: 'ãŠã‚„ã™ã¿ãªã•ã„',
                        translation: 'ï¼ˆæ™šå®‰ï¼‰',
                        time: '22:23'
                    },
                    { date: '11æœˆ28æ—¥ï¼ˆæœˆï¼‰' },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ãŠä»•äº‹ãŠç–²ã‚Œæ§˜ã§ã™ï¼ä»Šæ—¥ã‚‚ä½•äº‹ã‚‚ãªãã¦ã‚ˆã‹ã£ãŸã§ã™ (*Â´â–½`*)',
                        translation: 'ï¼ˆå·¥ä½œè¾›è‹¦äº†ï¼ä»Šå¤©ä¹Ÿå¹³å®‰æ— äº‹çœŸæ˜¯å¤ªå¥½äº†ï¼‰',
                        time: '18:30',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'â–ˆâ–ˆâ–ˆ',
                        text: 'æ¾æ±Ÿã•ã‚“ã®ãŠã‹ã’ã§ã™',
                        translation: 'ï¼ˆæ‰˜æ¾æ±Ÿå…ˆç”Ÿçš„ç¦ï¼‰',
                        time: '18:35'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã„ãˆã„ãˆğŸ’¦ ã‚ã®ã€ã‚ˆã‹ã£ãŸã‚‰ä»Šåº¦ã®ä¼‘ã¿ã«ãŠèŒ¶ã§ã‚‚ã©ã†ã§ã™ã‹ï¼Ÿ',
                        translation: 'ï¼ˆå“ªé‡Œå“ªé‡Œ é‚£ä¸ªï¼Œæ–¹ä¾¿çš„è¯ä¸‹æ¬¡ä¼‘æ¯ä¸€èµ·å–æ¯èŒ¶æ€ä¹ˆæ ·ï¼Ÿï¼‰',
                        time: '18:36',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'æ°—åˆ†è»¢æ›ã«ãªã‚‹ã‹ãªã£ã¦â€¦è¿·æƒ‘ã ã£ãŸã‚‰ã™ã¿ã¾ã›ã‚“ï¼',
                        translation: 'ï¼ˆæƒ³ç€å¯ä»¥æ¢æ¢å¿ƒæƒ…â€¦å¦‚æœæ‰“æ‰°åˆ°æ‚¨çš„è¯æŠ±æ­‰ï¼ï¼‰',
                        time: '18:36',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'â–ˆâ–ˆâ–ˆ',
                        text: 'ãœã²ï¼',
                        translation: 'ï¼ˆå¥½çš„ï¼ï¼‰',
                        time: '18:40'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'æœ¬å½“ã§ã™ã‹ï¼ï¼Ÿã‚„ã£ãŸï¼ï¼ãƒ¾(â‰§â–½â‰¦*)o',
                        translation: 'ï¼ˆçœŸçš„å—ï¼ï¼Ÿå¤ªå¥½äº†ï¼ï¼ï¼‰',
                        time: '18:40',
                        self: true
                    },
                    { date: '12æœˆ4æ—¥ï¼ˆæ—¥ï¼‰' },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä»Šæ—¥ã¯æ¥½ã—ã‹ã£ãŸã§ã™ï¼ã¾ãŸè¡Œãã¾ã—ã‚‡ã†ã­â˜•',
                        translation: 'ï¼ˆä»Šå¤©å¾ˆå¼€å¿ƒï¼ä¸‹æ¬¡å†ä¸€èµ·å»å§ï¼‰',
                        time: '17:20',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'â–ˆâ–ˆâ–ˆ',
                        text: 'ç§ã‚‚æ¥½ã—ã‹ã£ãŸã§ã™ğŸ˜Š',
                        translation: 'ï¼ˆæˆ‘ä¹Ÿå¾ˆå¼€å¿ƒï¼‰',
                        time: '17:25'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã‚ã®â€¦å®Ÿã¯ã€ãšã£ã¨è¨€ã„ãŸã‹ã£ãŸã“ã¨ãŒã‚ã£ã¦',
                        translation: 'ï¼ˆé‚£ä¸ªâ€¦å…¶å®ï¼Œæœ‰ä»¶äº‹ä¸€ç›´æƒ³è¯´ï¼‰',
                        time: '17:30',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'â–ˆâ–ˆâ–ˆ',
                        text: 'ï¼Ÿ',
                        translation: 'ï¼ˆï¼Ÿï¼‰',
                        time: '17:31'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ç›´æ¥ä¼šã£ã¦è¨€ã„ãŸã„ã®ã§â€¦æ˜æ—¥ã€æ™‚é–“ã‚‚ã‚‰ãˆã¾ã™ã‹ï¼Ÿ',
                        translation: 'ï¼ˆæƒ³å½“é¢è¯´â€¦æ˜å¤©å¯ä»¥ç»™æˆ‘ç‚¹æ—¶é—´å—ï¼Ÿï¼‰',
                        time: '17:32',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'â–ˆâ–ˆâ–ˆ',
                        text: 'ã¯ã„',
                        translation: 'ï¼ˆå¥½çš„ï¼‰',
                        time: '17:35'
                    },
                    { date: '12æœˆ5æ—¥ï¼ˆæœˆï¼‰' },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä»Šæ—¥ã¯â€¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ',
                        translation: 'ï¼ˆä»Šå¤©â€¦è°¢è°¢ä½ ï¼‰',
                        time: '21:00',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä¿ºã€çµ¶å¯¾ã«å¹¸ã›ã«ã—ã¾ã™ã‹ã‚‰ã€‚ç´„æŸã—ã¾ã™',
                        translation: 'ï¼ˆæˆ‘ä¸€å®šä¼šè®©ä½ å¹¸ç¦çš„ã€‚æˆ‘ä¿è¯ï¼‰',
                        time: '21:00',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'â–ˆâ–ˆâ–ˆ',
                        text: 'ã“ã¡ã‚‰ã“ãã€ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™',
                        translation: 'ï¼ˆæˆ‘æ‰æ˜¯ï¼Œè¯·å¤šå…³ç…§ï¼‰',
                        time: '21:05'
                    },
                    { date: '12æœˆ10æ—¥ï¼ˆåœŸï¼‰' },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ãŠã¯ã‚ˆã€œï¼ä»Šæ—¥ã®ãƒ‡ãƒ¼ãƒˆæ¥½ã—ã¿â™ª',
                        translation: 'ï¼ˆæ—©ä¸Šå¥½ã€œï¼å¥½æœŸå¾…ä»Šå¤©çš„çº¦ä¼šâ™ªï¼‰',
                        time: '08:00',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'â–ˆâ–ˆâ–ˆ',
                        text: 'ãŠã¯ã‚ˆã†ï¼ç§ã‚‚ã€œ',
                        translation: 'ï¼ˆæ—©ä¸Šå¥½ï¼æˆ‘ä¹Ÿæ˜¯ã€œï¼‰',
                        time: '08:10'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä½•é£Ÿã¹ãŸã„ï¼ŸğŸ½ï¸',
                        translation: 'ï¼ˆæƒ³åƒä»€ä¹ˆï¼Ÿï¼‰',
                        time: '08:11',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'â–ˆâ–ˆâ–ˆ',
                        text: 'ã‚ªãƒ ãƒ©ã‚¤ã‚¹ï¼',
                        translation: 'ï¼ˆè›‹åŒ…é¥­ï¼ï¼‰',
                        time: '08:12'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã‚ªãƒ ãƒ©ã‚¤ã‚¹ã­ï¼äº†è§£ğŸ‘ ç¾å‘³ã—ã„ãŠåº—çŸ¥ã£ã¦ã‚‹ã‚ˆ',
                        translation: 'ï¼ˆè›‹åŒ…é¥­å•Šï¼äº†è§£ æˆ‘çŸ¥é“ä¸€å®¶å¾ˆå¥½åƒçš„åº—ï¼‰',
                        time: '08:12',
                        self: true
                    },
                    { date: '12æœˆ24æ—¥ï¼ˆåœŸï¼‰' },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ãƒ¡ãƒªãƒ¼ã‚¯ãƒªã‚¹ãƒã‚¹ğŸ„âœ¨',
                        translation: 'ï¼ˆåœ£è¯å¿«ä¹ï¼‰',
                        time: '00:00',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'å›ã¨éã”ã™åˆã‚ã¦ã®ã‚¯ãƒªã‚¹ãƒã‚¹ã€ã™ã”ãå¬‰ã—ã„',
                        translation: 'ï¼ˆå’Œä½ ä¸€èµ·åº¦è¿‡çš„ç¬¬ä¸€ä¸ªåœ£è¯èŠ‚ï¼Œéå¸¸å¼€å¿ƒï¼‰',
                        time: '00:00',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'â–ˆâ–ˆâ–ˆ',
                        text: 'ãƒ¡ãƒªãƒ¼ã‚¯ãƒªã‚¹ãƒã‚¹ğŸ…',
                        translation: 'ï¼ˆåœ£è¯å¿«ä¹ï¼‰',
                        time: '00:02'
                    },
                    {
                        sender: 'user',
                        name: 'â–ˆâ–ˆâ–ˆ',
                        text: 'ç§ã‚‚å¬‰ã—ã„',
                        translation: 'ï¼ˆæˆ‘ä¹Ÿå¾ˆå¼€å¿ƒï¼‰',
                        time: '00:02'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ãšã£ã¨ä¸€ç·’ã«ã„ã‚ˆã†ã­',
                        translation: 'ï¼ˆæ°¸è¿œåœ¨ä¸€èµ·å§ï¼‰',
                        time: '00:03',
                        self: true
                    },
                    {
                        sender: 'user',
                        name: 'â–ˆâ–ˆâ–ˆ',
                        text: 'ã†ã‚“',
                        translation: 'ï¼ˆå—¯ï¼‰',
                        time: '00:05'
                    },
                    { date: '1æœˆ17æ—¥ï¼ˆç«ï¼‰' },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã”ã‚ã‚“',
                        translation: 'ï¼ˆå¯¹ä¸èµ·ï¼‰',
                        time: '03:15',
                        self: true,
                        unread: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'æœ¬å½“ã«ã”ã‚ã‚“',
                        translation: 'ï¼ˆçœŸçš„å¯¹ä¸èµ·ï¼‰',
                        time: '03:15',
                        self: true,
                        unread: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'å›ã®ç¬‘é¡”ãŒè¦‹ãŸã‹ã£ãŸã ã‘ãªã®ã«ã€ä¿ºãŒå¥ªã£ã¦ã—ã¾ã£ãŸ',
                        translation: 'ï¼ˆæˆ‘åªæ˜¯æƒ³çœ‹åˆ°ä½ çš„ç¬‘å®¹ï¼Œå´äº²æ‰‹å¤ºèµ°äº†å®ƒï¼‰',
                        time: '03:16',
                        self: true,
                        unread: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'å›ã‚’å¹¸ã›ã«ã§ãã‚‹ã®ã¯ã€ä¿ºã˜ã‚ƒãªã‹ã£ãŸ',
                        translation: 'ï¼ˆèƒ½è®©ä½ å¹¸ç¦çš„äººï¼Œä¸æ˜¯æˆ‘ï¼‰',
                        time: '03:20',
                        self: true,
                        unread: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'è‡ªç”±ã«ã—ã¦ã‚ã’ã‚‹ã€‚ã‚‚ã†æ€–ã„æ€ã„ã¯ã•ã›ãªã„',
                        translation: 'ï¼ˆæˆ‘ä¼šè®©ä½ è‡ªç”±çš„ã€‚ä¸ä¼šå†è®©ä½ å®³æ€•äº†ï¼‰',
                        time: '03:21',
                        self: true,
                        unread: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä»Šã¾ã§é–¢ã‚ã£ãŸå…¨ã¦ã®äººã«ç½ªã‚’å„Ÿã†ã€‚å›ã«ã‚‚',
                        translation: 'ï¼ˆæˆ‘ä¼šå‘æ‰€æœ‰è¢«æˆ‘ç‰µè¿çš„äººèµç½ªã€‚ä¹ŸåŒ…æ‹¬ä½ ï¼‰',
                        time: '03:25',
                        self: true,
                        unread: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ç”Ÿãã‚‹å¸Œæœ›ã‚’ãã‚Œã¦ã€ã‚ã‚ŠãŒã¨ã†',
                        translation: 'ï¼ˆè°¢è°¢ä½ ç»™äº†æˆ‘æ´»ä¸‹å»çš„å¸Œæœ›ï¼‰',
                        time: '03:30',
                        self: true,
                        unread: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã˜ã‚ƒã‚ã€å…ƒæ°—ã§',
                        translation: 'ï¼ˆé‚£ä¹ˆï¼Œä¿é‡ï¼‰',
                        time: '03:31',
                        self: true,
                        unread: true
                    }
                ]
            },
            // å’Œä¸‰ä¸Šçš„ç§èŠ
            'private_mikami': {
                name: 'ä¸‰ä¸Š',
                type: 'private',
                messages: [
                    { date: '10æœˆ5æ—¥ï¼ˆæ°´ï¼‰' },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä¹…ã—ã¶ã‚Šã€ä¸‰ä¸Š',
                        translation: 'ï¼ˆå¥½ä¹…ä¸è§ï¼Œä¸‰ä¸Šï¼‰',
                        time: '23:00',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'è¦šãˆã¦ã‚‹ã‚ˆãªï¼Ÿä¸­å­¦ã®é ƒã®ã€Œãƒã‚¤ã‚­ãƒ³ã€ã ã‚ˆ',
                        translation: 'ï¼ˆè¿˜è®°å¾—å§ï¼Ÿä¸­å­¦æ—¶çš„"ç»†èŒ"å•Šï¼‰',
                        time: '23:00',
                        self: true
                    },
                    {
                        sender: 'mikami',
                        name: 'ä¸‰ä¸Š',
                        text: 'ã¯ï¼Ÿèª°ã ã‚ˆ',
                        translation: 'ï¼ˆå•Šï¼Ÿä½ è°å•Šï¼‰',
                        time: '23:05'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'æ¾æ±Ÿæ­£ç¾©ã€‚ä»Šã¯è­¦å¯Ÿã‚„ã£ã¦ã‚‹',
                        translation: 'ï¼ˆæ¾æ±Ÿæ­£ä¹‰ã€‚ç°åœ¨å½“è­¦å¯Ÿï¼‰',
                        time: '23:05',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ãŠå‰ã®ã€Œä»•äº‹ã€ã®ã“ã¨ã€å…¨éƒ¨çŸ¥ã£ã¦ã‚‹ã‚ˆ',
                        translation: 'ï¼ˆä½ çš„"å·¥ä½œ"ï¼Œæˆ‘å…¨éƒ½çŸ¥é“ï¼‰',
                        time: '23:06',
                        self: true
                    },
                    {
                        sender: 'mikami',
                        name: 'ä¸‰ä¸Š',
                        text: 'â€¦ä½•ãŒè¨€ã„ãŸã„',
                        translation: 'ï¼ˆâ€¦ä½ æƒ³è¯´ä»€ä¹ˆï¼‰',
                        time: '23:10'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä¿ºã®è¨€ã†ã“ã¨èã‘ã°è¦‹é€ƒã—ã¦ã‚„ã‚‹ã€‚ç°¡å˜ã ã‚ï¼Ÿ',
                        translation: 'ï¼ˆå¬æˆ‘çš„è¯å°±æ”¾è¿‡ä½ ã€‚å¾ˆç®€å•å§ï¼Ÿï¼‰',
                        time: '23:10',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'æ–­ã£ãŸã‚‰â€¦åˆ†ã‹ã‚‹ã‚ˆãªï¼Ÿ',
                        translation: 'ï¼ˆæ‹’ç»çš„è¯â€¦ä½ æ‡‚çš„å§ï¼Ÿï¼‰',
                        time: '23:11',
                        self: true
                    },
                    {
                        sender: 'mikami',
                        name: 'ä¸‰ä¸Š',
                        text: 'ã‚¯ã‚½ãŒ',
                        translation: 'ï¼ˆå¦ˆçš„ï¼‰',
                        time: '23:15'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'è¿”äº‹ã¯ï¼Ÿ',
                        translation: 'ï¼ˆå›ç­”å‘¢ï¼Ÿï¼‰',
                        time: '23:15',
                        self: true
                    },
                    {
                        sender: 'mikami',
                        name: 'ä¸‰ä¸Š',
                        text: 'â€¦åˆ†ã‹ã£ãŸã‚ˆ',
                        translation: 'ï¼ˆâ€¦çŸ¥é“äº†ï¼‰',
                        time: '23:20'
                    },
                    { date: '11æœˆ20æ—¥ï¼ˆæ—¥ï¼‰' },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: '11/25ã€20:30ã€â–ˆâ–ˆå…¬åœ’è£',
                        translation: 'ï¼ˆ11/25ã€20:30ã€â–ˆâ–ˆå…¬å›­åé¢ï¼‰',
                        time: '22:00',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'å¥³ãŒä¸€äººã§é€šã‚‹ã€‚æ€–ãŒã‚‰ã›ã‚‹ã ã‘ã§ã„ã„',
                        translation: 'ï¼ˆä¼šæœ‰ä¸ªå¥³äººç‹¬è‡ªç»è¿‡ã€‚åªè¦å“å”¬å¥¹å°±è¡Œï¼‰',
                        time: '22:00',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'çµ¶å¯¾ã«é¡”ã‚’å‚·ã¤ã‘ã‚‹ãªã€‚ã‚„ã‚Šã™ãã‚‹ãª',
                        translation: 'ï¼ˆç»å¯¹ä¸èƒ½ä¼¤åˆ°è„¸ã€‚ä¸è¦åšè¿‡å¤´ï¼‰',
                        time: '22:01',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä¿ºãŒæ¥ãŸã‚‰ã™ãé€ƒã’ã‚',
                        translation: 'ï¼ˆæˆ‘æ¥äº†å°±ç«‹åˆ»é€ƒè·‘ï¼‰',
                        time: '22:01',
                        self: true
                    },
                    {
                        sender: 'mikami',
                        name: 'ä¸‰ä¸Š',
                        text: 'ãŠå‰ãƒã‚¸ã§é ­ãŠã‹ã—ã„ãª',
                        translation: 'ï¼ˆä½ æ˜¯çœŸçš„æœ‰ç—…å§ï¼‰',
                        time: '22:10'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ãŠå‰ã«è¨€ã‚ã‚ŒãŸããªã„',
                        translation: 'ï¼ˆä½ æ²¡èµ„æ ¼è¯´æˆ‘ï¼‰',
                        time: '22:10',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'å¤±æ•—ã—ãŸã‚‰ã©ã†ãªã‚‹ã‹åˆ†ã‹ã£ã¦ã‚‹ã‚ˆãªï¼Ÿ',
                        translation: 'ï¼ˆå¤±è´¥çš„è¯ä¼šæ€æ ·ä½ æ‡‚çš„å§ï¼Ÿï¼‰',
                        time: '22:11',
                        self: true
                    },
                    {
                        sender: 'mikami',
                        name: 'ä¸‰ä¸Š',
                        text: 'åˆ†ã‹ã£ã¦ã‚‹ã‚ˆâ€¦',
                        translation: 'ï¼ˆçŸ¥é“äº†â€¦ï¼‰',
                        time: '22:15'
                    },
                    { date: '11æœˆ25æ—¥ï¼ˆé‡‘ï¼‰' },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã‚ˆãã‚„ã£ãŸ',
                        translation: 'ï¼ˆå¹²å¾—å¥½ï¼‰',
                        time: '21:00',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã—ã°ã‚‰ãé€£çµ¡ã™ã‚‹ãªã€‚ã“ã£ã¡ã‹ã‚‰é€£çµ¡ã™ã‚‹',
                        translation: 'ï¼ˆæš‚æ—¶ä¸è¦è”ç³»æˆ‘ã€‚æˆ‘ä¼šè”ç³»ä½ ï¼‰',
                        time: '21:00',
                        self: true
                    },
                    {
                        sender: 'mikami',
                        name: 'ä¸‰ä¸Š',
                        text: 'ã“ã‚Œã§çµ‚ã‚ã‚Šã ã‚ˆãªï¼Ÿ',
                        translation: 'ï¼ˆè¿™å°±ç»“æŸäº†å§ï¼Ÿï¼‰',
                        time: '21:05'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'çµ‚ã‚ã‚Šï¼Ÿ',
                        translation: 'ï¼ˆç»“æŸï¼Ÿï¼‰',
                        time: '21:05',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ãŠå‰ãŒä¿ºã«é€†ã‚‰ãˆãªããªã£ãŸæ™‚ç‚¹ã§ã€çµ‚ã‚ã‚Šãªã‚“ã¦ãªã„ã‚ˆ',
                        translation: 'ï¼ˆä»ä½ æ— æ³•åæŠ—æˆ‘çš„é‚£ä¸€åˆ»èµ·ï¼Œå°±ä¸å­˜åœ¨ç»“æŸäº†ï¼‰',
                        time: '21:06',
                        self: true
                    },
                    {
                        sender: 'mikami',
                        name: 'ä¸‰ä¸Š',
                        text: 'ã¦ã‚ãˆâ€¦ï¼',
                        translation: 'ï¼ˆä½ è¿™æ··è›‹â€¦ï¼ï¼‰',
                        time: '21:10'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'å¤§äººã—ãã—ã¦ã‚ã€‚æ¬¡ã®æŒ‡ç¤ºã‚’å¾…ã¦',
                        translation: 'ï¼ˆè€å®ç‚¹ã€‚ç­‰ä¸‹ä¸€æ­¥æŒ‡ç¤ºï¼‰',
                        time: '21:10',
                        self: true
                    },
                    { date: '1æœˆ4æ—¥ï¼ˆæ°´ï¼‰' },
                    {
                        sender: 'mikami',
                        name: 'ä¸‰ä¸Š',
                        text: 'ã‚‚ã†é–¢ã‚ã‚ŠãŸããªã„ã€‚ã‚ã®å­ã«ã‚‚å…¨éƒ¨è¨€ã£ãŸ',
                        translation: 'ï¼ˆæˆ‘ä¸æƒ³å†ç‰µæ‰¯è¿›å»äº†ã€‚æˆ‘å·²ç»å…¨å‘Šè¯‰é‚£å¥³å­©äº†ï¼‰',
                        time: '15:00'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä½•ï¼Ÿ',
                        translation: 'ï¼ˆä»€ä¹ˆï¼Ÿï¼‰',
                        time: '15:01',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ãŠå‰ã€ä½•è¨€ã£ãŸ',
                        translation: 'ï¼ˆä½ è¯´äº†ä»€ä¹ˆï¼‰',
                        time: '15:01',
                        self: true
                    },
                    {
                        sender: 'mikami',
                        name: 'ä¸‰ä¸Š',
                        text: 'å…¨éƒ¨ã ã‚ˆã€‚ãŠå‰ã®è¨ˆç”»ã‚‚ã€ä¿ºãŒè¥²ã£ãŸã“ã¨ã‚‚',
                        translation: 'ï¼ˆå…¨éƒ¨ã€‚ä½ çš„è®¡åˆ’ï¼Œæˆ‘è¢­å‡»å¥¹çš„äº‹ï¼‰',
                        time: '15:02'
                    },
                    {
                        sender: 'mikami',
                        name: 'ä¸‰ä¸Š',
                        text: 'ã‚ã®å­ãŒå¯å“€æƒ³ã«ãªã£ãŸã€‚ãŠå‰ã«åˆ©ç”¨ã•ã‚Œã¦',
                        translation: 'ï¼ˆé‚£å¥³å­©å¤ªå¯æ€œäº†ã€‚è¢«ä½ åˆ©ç”¨ï¼‰',
                        time: '15:02'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ãŠå‰â€¦',
                        translation: 'ï¼ˆä½ â€¦ï¼‰',
                        time: '15:03',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ãŠå‰ã€ä½•ã—ã¦ãã‚Œã¦ã‚“ã ã‚ˆ',
                        translation: 'ï¼ˆä½ çŸ¥é“ä½ åšäº†ä»€ä¹ˆå—ï¼‰',
                        time: '15:03',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'æ®ºã™',
                        translation: 'ï¼ˆæˆ‘è¦æ€äº†ä½ ï¼‰',
                        time: '15:04',
                        self: true
                    },
                    {
                        sender: 'mikami',
                        name: 'ä¸‰ä¸Š',
                        text: 'ã‚‚ã†é€ƒã’ã‚‹ã€‚ãŠå‰ã®æ‰‹ã®å±Šã‹ãªã„ã¨ã“ã‚ã«',
                        translation: 'ï¼ˆæˆ‘è¦è·‘äº†ã€‚å»ä½ å¤Ÿä¸åˆ°çš„åœ°æ–¹ï¼‰',
                        time: '15:05'
                    },
                    {
                        sender: 'mikami',
                        name: 'ä¸‰ä¸Š',
                        text: 'ã‚ã°ã‚ˆã€ãƒã‚¤ã‚­ãƒ³ã€‚ã„ã‚„ã€æ­£ç¾©ã®å‘³æ–¹ã•ã‚“ï¼Ÿç¬‘',
                        translation: 'ï¼ˆå†è§äº†ï¼Œç»†èŒã€‚ä¸å¯¹ï¼Œæ­£ä¹‰çš„ä¼™ä¼´å…ˆç”Ÿï¼Ÿç¬‘ï¼‰',
                        time: '15:05'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'å¾…ã¦',
                        translation: 'ï¼ˆç­‰ç­‰ï¼‰',
                        time: '15:06',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ä¸‰ä¸Š',
                        translation: 'ï¼ˆä¸‰ä¸Šï¼‰',
                        time: '15:10',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'è¿”äº‹ã—ã‚',
                        translation: 'ï¼ˆå›è¯ï¼‰',
                        time: '15:30',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'æ—¢èª­ç„¡è¦–ã™ã‚“ãªã€‚è¿”äº‹ã—ã‚',
                        translation: 'ï¼ˆåˆ«å·²è¯»ä¸å›ã€‚å›è¯ï¼‰',
                        time: '16:00',
                        self: true
                    }
                ]
            },
            // å’Œæ¡ç”Ÿï¼ˆåˆ«å¢…æä¾›è€…ï¼‰çš„ç§èŠ
            'private_villa': {
                name: 'æ¡ç”Ÿã•ã‚“',
                type: 'private',
                messages: [
                    { date: '8æœˆ15æ—¥ï¼ˆæœˆï¼‰' },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'æ¾æ±Ÿã•ã‚“ã€å…ˆæ—¥ã¯æœ¬å½“ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ',
                        translation: 'ï¼ˆæ¾æ±Ÿå…ˆç”Ÿï¼Œå‰äº›æ—¥å­çœŸçš„éå¸¸æ„Ÿè°¢æ‚¨ï¼‰',
                        time: '10:00'
                    },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'æ¯å­ã‚’ç«äº‹ã‹ã‚‰åŠ©ã‘ã¦ã„ãŸã ã„ã¦â€¦å‘½ã®æ©äººã§ã™',
                        translation: 'ï¼ˆæ‚¨ä»ç«ç¾ä¸­æ•‘å‡ºäº†æˆ‘å„¿å­â€¦æ‚¨æ˜¯æˆ‘ä»¬çš„æ•‘å‘½æ©äººï¼‰',
                        time: '10:00'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã„ãˆã€å½“ç„¶ã®ã“ã¨ã‚’ã—ãŸã¾ã§ã§ã™',
                        translation: 'ï¼ˆä¸ï¼Œåªæ˜¯åšäº†åº”è¯¥åšçš„äº‹ï¼‰',
                        time: '10:05',
                        self: true
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'æ¯å­ã•ã‚“ã€æ€ªæˆ‘ã®å…·åˆã¯ã„ã‹ãŒã§ã™ã‹ï¼Ÿ',
                        translation: 'ï¼ˆä»¤å…¬å­çš„ä¼¤åŠ¿æ€ä¹ˆæ ·äº†ï¼Ÿï¼‰',
                        time: '10:05',
                        self: true
                    },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'ãŠã‹ã’ã•ã¾ã§å®Œæ²»ã—ã¾ã—ãŸï¼å…ƒæ°—ã«èµ°ã‚Šå›ã£ã¦ã¾ã™ğŸ˜Š',
                        translation: 'ï¼ˆæ‰˜æ‚¨çš„ç¦å·²ç»ç—Šæ„ˆäº†ï¼ç°åœ¨æ´»è¹¦ä¹±è·³çš„ï¼‰',
                        time: '10:08'
                    },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'ã¤ãã¾ã—ã¦ã¯ã€ãŠç¤¼ã‚’ã•ã›ã¦ã„ãŸã ããŸãâ€¦',
                        translation: 'ï¼ˆæ‰€ä»¥ï¼Œæˆ‘æƒ³è¡¨è¾¾ä¸€ä¸‹è°¢æ„â€¦ï¼‰',
                        time: '10:08'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã„ãˆã„ãˆã€ãŠæ°—æŒã¡ã ã‘ã§ååˆ†ã§ã™ğŸ’¦',
                        translation: 'ï¼ˆä¸ä¸ï¼Œå¿ƒæ„æˆ‘é¢†äº†å°±è¶³å¤Ÿäº†ï¼‰',
                        time: '10:10',
                        self: true
                    },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'å®Ÿã¯ã€å±±å¥¥ã«åˆ¥è˜ãŒã‚ã‚Šã¾ã—ã¦',
                        translation: 'ï¼ˆå…¶å®ï¼Œæˆ‘åœ¨æ·±å±±é‡Œæœ‰ä¸€æ ‹åˆ«å¢…ï¼‰',
                        time: '10:12'
                    },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'ã‚‚ã†ä½•å¹´ã‚‚ä½¿ã£ã¦ã„ãªã„ã®ã§ã™ãŒã€ã„ã¤ã§ã‚‚è‡ªç”±ã«ãŠä½¿ã„ãã ã•ã„',
                        translation: 'ï¼ˆå·²ç»å¥½å‡ å¹´æ²¡ç”¨äº†ï¼Œè¯·éšæ—¶è‡ªç”±ä½¿ç”¨ï¼‰',
                        time: '10:12'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ãˆã£ã€ãã‚“ãªâ€¦ãã‚Œã¯å—ã‘å–ã‚Œã¾ã›ã‚“',
                        translation: 'ï¼ˆè¯¶ï¼Œè¿™â€¦æˆ‘ä¸èƒ½æ”¶ï¼‰',
                        time: '10:15',
                        self: true
                    },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'è²¸ã™ã ã‘ã§ã™ã‹ã‚‰ï¼æ¯æŠœãã«ã§ã‚‚ä½¿ã£ã¦ãã ã•ã„',
                        translation: 'ï¼ˆåªæ˜¯å€Ÿæ‚¨ç”¨ï¼æ•£æ•£å¿ƒä»€ä¹ˆçš„æ—¶å€™ç”¨ï¼‰',
                        time: '10:16'
                    },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'é™ã‹ã§ã€å‘¨ã‚Šã«ä½•ã‚‚ãªã„ã€ä¸€äººã«ãªã‚Œã‚‹å ´æ‰€ã§ã™',
                        translation: 'ï¼ˆå¾ˆå®‰é™ï¼Œå‘¨å›´ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œæ˜¯ä¸ªå¯ä»¥ç‹¬å¤„çš„åœ°æ–¹ï¼‰',
                        time: '10:16'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'â€¦ã„ãˆã€æœ¬å½“ã«çµæ§‹ã§ã™',
                        translation: 'ï¼ˆâ€¦ä¸ï¼ŒçœŸçš„ä¸ç”¨äº†ï¼‰',
                        time: '10:20',
                        self: true
                    },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'é æ…®ã—ãªã„ã§ãã ã•ã„ğŸ™',
                        translation: 'ï¼ˆè¯·ä¸è¦å®¢æ°”ï¼‰',
                        time: '10:21'
                    },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'éµã¨å ´æ‰€ã®æƒ…å ±ã ã‘ãŠé€ã‚Šã—ã¾ã™ã€‚ä½¿ã†ä½¿ã‚ãªã„ã¯æ¾æ±Ÿã•ã‚“ã®è‡ªç”±ã§ã™',
                        translation: 'ï¼ˆæˆ‘å…ˆæŠŠé’¥åŒ™å’Œä½ç½®ä¿¡æ¯å‘ç»™æ‚¨ã€‚ç”¨ä¸ç”¨éšæ‚¨ï¼‰',
                        time: '10:21'
                    },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'ã€ç”»åƒã€‘ğŸ“åˆ¥è˜ã®ä½ç½®æƒ…å ±',
                        translation: 'ï¼ˆã€å›¾ç‰‡ã€‘ğŸ“åˆ«å¢…ä½ç½®ä¿¡æ¯ï¼‰',
                        time: '10:22'
                    },
                    { date: '9æœˆ1æ—¥ï¼ˆæœ¨ï¼‰' },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'éµã€å±Šãã¾ã—ãŸã§ã—ã‚‡ã†ã‹ï¼Ÿ',
                        translation: 'ï¼ˆé’¥åŒ™æ”¶åˆ°äº†å—ï¼Ÿï¼‰',
                        time: '14:00'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã¯ã„ã€å±Šãã¾ã—ãŸã€‚æœ¬å½“ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™',
                        translation: 'ï¼ˆæ˜¯çš„ï¼Œæ”¶åˆ°äº†ã€‚çœŸçš„éå¸¸æ„Ÿè°¢ï¼‰',
                        time: '14:10',
                        self: true
                    },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'ã„ã¤ã‹å¿…è¦ã«ãªã£ãŸæ™‚ã€ä½¿ã£ã¦ãã ã•ã„ã­',
                        translation: 'ï¼ˆä»€ä¹ˆæ—¶å€™éœ€è¦çš„è¯ï¼Œè¯·ä¸€å®šä½¿ç”¨ï¼‰',
                        time: '14:11'
                    },
                    {
                        sender: 'kiryu',
                        name: 'æ¡ç”Ÿ',
                        text: 'æœ¬å½“ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ',
                        translation: 'ï¼ˆçœŸçš„éå¸¸æ„Ÿè°¢æ‚¨ï¼‰',
                        time: '14:11'
                    },
                    {
                        sender: 'matsue',
                        name: 'æ¾æ±Ÿ',
                        text: 'ã“ã¡ã‚‰ã“ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™',
                        translation: 'ï¼ˆæˆ‘æ‰è¦è°¢è°¢æ‚¨ï¼‰',
                        time: '14:15',
                        self: true
                    }
                ]
            }
        };

        // æ¸²æŸ“èŠå¤©åˆ—è¡¨
        function renderChatList() {
            messageViewState = 'list';
            currentChatId = null;

            const listHtml = chatListData.map(chat => {
                const avatarClass = chat.type === 'group' ? 'group' : '';
                const unreadBadge = chat.unread ? `<div class="chat-unread">${chat.unread}</div>` : '';
                const pinnedClass = chat.pinned ? 'pinned' : '';
                const pinnedIcon = chat.pinned ? '<span class="chat-pin">ğŸ“Œ</span>' : '';
                const disabledClass = chat.disabled ? 'disabled' : '';

                // è‰ç¨¿æ˜¾ç¤º
                let previewContent = chat.preview;
                if (chat.draft) {
                    previewContent = `<span class="chat-draft">[ä¸‹æ›¸ã] ${chat.draft}</span>`;
                }

                // ç¦ç”¨çš„èŠå¤©ä¸å“åº”ç‚¹å‡»
                const onclickAttr = chat.disabled ? '' : `onclick="openChat('${chat.id}')"`;

                return `
                    <div class="chat-item ${pinnedClass} ${disabledClass}" ${onclickAttr}>
                        <div class="chat-avatar ${avatarClass}">${chat.avatar}</div>
                        <div class="chat-info">
                            <div class="chat-header">
                                <span class="chat-name">${chat.name}${pinnedIcon}</span>
                                <span class="chat-time">${chat.time}</span>
                            </div>
                            <div class="chat-preview">${previewContent}</div>
                        </div>
                        ${unreadBadge}
                    </div>
                `;
            }).join('');

            return `
                <div class="messages-app">
                    <div class="chat-list">
                        ${listHtml}
                    </div>
                </div>
            `;
        }

        // æ‰“å¼€èŠå¤©è¯¦æƒ…
        function openChat(chatId) {
            const chat = chatMessagesData[chatId];
            if (!chat) return;

            messageViewState = 'chat';
            currentChatId = chatId;

            const chatInfo = chatListData.find(c => c.id === chatId);
            const isPrivate = chat.type === 'private';

            const messagesHtml = chat.messages.map(msg => {
                // æ—¥æœŸåˆ†éš”çº¿
                if (msg.date) {
                    return `
                        <div class="message-date-divider">
                            <span>${msg.date}</span>
                        </div>
                    `;
                }

                const selfClass = msg.self ? 'self' : 'other';
                const avatarClass = msg.sender;
                const senderClass = msg.sender;

                // ç”Ÿæˆå¤´åƒemoji
                let avatarEmoji = 'ğŸ‘¤';
                if (msg.sender === 'takahashi') avatarEmoji = 'ğŸ‘¨';
                else if (msg.sender === 'matsue') avatarEmoji = 'ğŸ‘®';
                else if (msg.sender === 'user') avatarEmoji = 'ğŸ‘©';
                else if (msg.sender === 'mikami') avatarEmoji = 'ğŸ‘¤';
                else if (msg.sender === 'kiryu') avatarEmoji = 'ğŸ©';

                // å·²è¯»æ ‡è®°ï¼ˆè‡ªå·±å‘çš„æ¶ˆæ¯æ˜¾ç¤ºï¼Œå¦‚æœmsg.unreadä¸ºtrueåˆ™ä¸æ˜¾ç¤ºæ—¢èª­ï¼‰
                let readMark = '';
                if (msg.self) {
                    readMark = msg.unread ? '' : '<span class="message-read">æ—¢èª­</span>';
                }

                // ç¿»è¯‘
                const translationHtml = msg.translation ? `<div class="message-translation">${msg.translation}</div>` : '';

                // ç§èŠæ—¶ä¸æ˜¾ç¤ºå‘é€è€…åå­—
                const senderHtml = isPrivate ? '' : `<span class="message-sender ${senderClass}">${msg.name}</span>`;

                return `
                    <div class="message-item ${selfClass}">
                        <div class="message-avatar ${avatarClass}">${avatarEmoji}</div>
                        <div class="message-content-wrapper">
                            ${senderHtml}
                            <div class="message-bubble">${msg.text}</div>
                            ${translationHtml}
                            <div class="message-meta">
                                ${readMark}
                                <span>${msg.time}</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            const membersText = chat.type === 'group' ? `ãƒ¡ãƒ³ãƒãƒ¼: ${chat.members.join(', ')}` : '';

            // è‰ç¨¿è¾“å…¥æ¡†å†…å®¹
            const draftText = chatInfo?.draft || 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›...';
            const draftClass = chatInfo?.draft ? 'has-draft' : '';

            appContent.innerHTML = `
                <div class="messages-app">
                    <div class="chat-view">
                        <div class="chat-view-header">
                            <div class="chat-view-avatar">${chatInfo?.avatar || 'ğŸ’¬'}</div>
                            <div>
                                <div class="chat-view-name">${chat.name}</div>
                                <div class="chat-view-members">${membersText}</div>
                            </div>
                        </div>
                        <div class="message-list">
                            ${messagesHtml}
                        </div>
                        <div class="chat-input-area">
                            <div class="chat-input ${draftClass}">${draftText}</div>
                            <div class="chat-send-btn" ${chatInfo?.draft && chatId === 'private_user' ? 'onclick="sendFinalMessage()"' : ''}>
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                                </svg>
                            </div>
                        </div>
                        <div class="chat-back-btn" onclick="backToChatList()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                            </svg>
                            ãƒˆãƒ¼ã‚¯ä¸€è¦§ã«æˆ»ã‚‹
                        </div>
                    </div>
                </div>
            `;

            // æ»šåŠ¨åˆ°åº•éƒ¨
            setTimeout(() => {
                const messageList = document.querySelector('.message-list');
                if (messageList) {
                    messageList.scrollTop = messageList.scrollHeight;
                }
            }, 100);
        }

        // è¿”å›èŠå¤©åˆ—è¡¨
        function backToChatList() {
            messageViewState = 'list';
            currentChatId = null;
            appContent.innerHTML = renderChatList();
        }

        // å‘é€æœ€åçš„æ¶ˆæ¯ï¼ˆå½©è›‹ï¼‰
        function sendFinalMessage() {
            const messageList = document.querySelector('.message-list');
            const chatInput = document.querySelector('.chat-input');
            const sendBtn = document.querySelector('.chat-send-btn');

            if (!messageList || !chatInput) return;

            // ç¦ç”¨å‘é€æŒ‰é’®é˜²æ­¢é‡å¤ç‚¹å‡»
            sendBtn.style.pointerEvents = 'none';

            // è·å–è‰ç¨¿å†…å®¹
            const draftText = 'æ„›ã—ã¦ã‚‹ã€ãšã£ã¨';

            // æ¸…ç©ºè¾“å…¥æ¡†
            chatInput.textContent = 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›...';
            chatInput.classList.remove('has-draft');

            // æ·»åŠ å‘é€çš„æ¶ˆæ¯åˆ°åˆ—è¡¨
            const newMessage = document.createElement('div');
            newMessage.className = 'message-item self';
            newMessage.innerHTML = `
                <div class="message-avatar matsue">ğŸ‘®</div>
                <div class="message-content-wrapper">
                    <div class="message-bubble">${draftText}</div>
                    <div class="message-translation">ï¼ˆæˆ‘çˆ±ä½ ï¼Œæ°¸è¿œï¼‰</div>
                    <div class="message-meta">
                        <span class="message-time">${new Date().getHours().toString().padStart(2, '0')}:${new Date().getMinutes().toString().padStart(2, '0')}</span>
                    </div>
                </div>
            `;
            messageList.appendChild(newMessage);

            // æ»šåŠ¨åˆ°åº•éƒ¨
            messageList.scrollTop = messageList.scrollHeight;

            // 1.5ç§’åæ˜¾ç¤ºå·²è¯»
            setTimeout(() => {
                const meta = newMessage.querySelector('.message-meta');
                const readMark = document.createElement('span');
                readMark.className = 'message-read';
                readMark.textContent = 'æ—¢èª­';
                meta.insertBefore(readMark, meta.firstChild);
            }, 1500);

            // 3ç§’åå¼€å§‹æ˜Ÿç©ºé£˜è½ç‰¹æ•ˆ
            setTimeout(() => {
                startFallingStarsEffect();
            }, 3000);
        }

        // æ˜Ÿç©ºé£˜è½ç‰¹æ•ˆ
        function startFallingStarsEffect() {
            // åˆ›å»ºç‰¹æ•ˆè¦†ç›–å±‚
            const overlay = document.createElement('div');
            overlay.className = 'falling-stars-overlay';
            document.querySelector('.phone-frame').appendChild(overlay);

            // ç‚¹å‡»å…³é—­ç‰¹æ•ˆ
            overlay.addEventListener('click', () => {
                overlay.classList.add('fading-out');
                setTimeout(() => {
                    overlay.remove();
                }, 500);
            });

            // åˆ›å»ºé£˜è½çš„æ˜Ÿæ˜Ÿ
            const starCount = 50;
            for (let i = 0; i < starCount; i++) {
                setTimeout(() => {
                    if (!document.contains(overlay)) return; // å¦‚æœå·²ç§»é™¤åˆ™åœæ­¢
                    const star = document.createElement('div');
                    star.className = 'falling-star';
                    star.style.left = Math.random() * 100 + '%';
                    star.style.animationDuration = (3 + Math.random() * 4) + 's';
                    star.style.animationDelay = '0s';
                    star.style.opacity = 0.3 + Math.random() * 0.7;

                    // éšæœºæ˜Ÿæ˜Ÿå¤§å°
                    const size = 2 + Math.random() * 4;
                    star.style.width = size + 'px';
                    star.style.height = size + 'px';

                    overlay.appendChild(star);

                    // æ˜Ÿæ˜Ÿè½ä¸‹åç§»é™¤
                    star.addEventListener('animationend', () => {
                        star.remove();
                    });
                }, i * 100);
            }

            // é€æ¸å˜æš—
            setTimeout(() => {
                if (!document.contains(overlay)) return;
                overlay.classList.add('darkening');
            }, 500);

            // æ˜¾ç¤ºç»“è¯­æ–‡å­—
            setTimeout(() => {
                if (!document.contains(overlay)) return;
                const endText = document.createElement('div');
                endText.className = 'ending-text';
                endText.innerHTML = `
                    <div class="ending-line">ã“ã®æƒ³ã„ã¯å±Šã‹ãªãã¦ã‚‚</div>
                    <div class="ending-line-sub">ï¼ˆå³ä½¿è¿™ä»½å¿ƒæ„æ— æ³•ä¼ è¾¾ï¼‰</div>
                    <div class="ending-line" style="margin-top: 20px;">ãšã£ã¨ã€æ„›ã—ã¦ã‚‹</div>
                    <div class="ending-line-sub">ï¼ˆæˆ‘ä¼šæ°¸è¿œçˆ±ä½ ï¼‰</div>
                `;
                overlay.appendChild(endText);

                // æ˜¾ç¤ºç‚¹å‡»æç¤º
                setTimeout(() => {
                    if (!document.contains(overlay)) return;
                    const hint = document.createElement('div');
                    hint.className = 'ending-hint';
                    hint.textContent = 'ã‚¿ãƒƒãƒ—ã—ã¦é–‰ã˜ã‚‹';
                    overlay.appendChild(hint);
                }, 2000);
            }, 4000);
        }
    </script>
</body>
</html>
